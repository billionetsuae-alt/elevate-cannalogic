/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/@gumlet/player.js@3.0.3/dist/main.global.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";(()=>{var l={EVENTS:{READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",SEEKED:"seeked",ERROR:"error",FULLSCREEN_CHANGE:"fullscreenChange",PIP_CHANGE:"pipChange",PLAYBACK_RATE_CHANGE:"playbackRateChange",AUDIO_CHANGE:"audioChange",QUALITY_CHANGE:"qualityChange",VOLUME_CHANGE:"volumeChange",all(){let i=[];for(let e in l.EVENTS)l.has(l.EVENTS,e)&&l.isString(l.EVENTS[e])&&i.push(l.EVENTS[e]);return i}},POST_MESSAGE:!!window.postMessage,METHODS:{PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",SETPLAYBACKRATE:"setPlaybackRate",GETPLAYBACKRATE:"getPlaybackRate",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener",all(){let i=[];for(let e in l.METHODS)l.has(l.METHODS,e)&&l.isString(l.METHODS[e])&&i.push(l.METHODS[e]);return i}},DEBUG:!1,VERSION:"2.0",CONTEXT:"player.js",isString(i){return Object.prototype.toString.call(i)==="[object String]"},has(i,e){return Object.hasOwn(i,e)},addEvent(i,e,t){i&&(i.addEventListener?i.addEventListener(e,t,!1):i.attachEvent?i.attachEvent(`on${e}`,t):i[`on${e}`]=t)},isNone(i){return i==null},assert(i,e){if(!i)throw e||"Player.js Assert Failed"},generateUUID(){if(crypto!=null&&crypto.randomUUID)return crypto.randomUUID();{let i=URL.createObjectURL(new Blob);return i.substring(i.lastIndexOf("/")+1)}},isArray(i){return Object.prototype.toString.call(i)==="[object Array]"}},o=l;var p=class{constructor(){this.data={}}has(e,t){if(!Object.hasOwn(this.data,e))return!1;if(o.isNone(t))return!0;let r=this.data[e];for(let n=0;n<r.length;n++)if(r[n].id===t)return!0;return!1}add(e,t,r,n,s=!1){let a={id:e,event:t,cb:r,ctx:n,one:s};this.has(t)?this.data[t].push(a):this.data[t]=[a]}execute(e,t,r,n){if(!this.has(e,t))return!1;let s=[],a=[];for(let c=0;c<this.data[e].length;c++){let u=this.data[e][c];o.isNone(t)||!o.isNone(t)&&u.id===t?(a.push({cb:u.cb,ctx:u.ctx?u.ctx:n,data:r}),u.one===!1&&s.push(u)):s.push(u)}s.length===0?delete this.data[e]:this.data[e]=s;for(let c=0;c<a.length;c++){let u=a[c];u.cb.call(u.ctx,u.data)}return!0}on(e,t,r,n){this.add(e,t,r,n,!1)}one(e,t,r,n){this.add(e,t,r,n,!0)}off(e,t){let r=[];if(!Object.hasOwn(this.data,e))return r;let n=[];for(let s=0;s<this.data[e].length;s++){let a=this.data[e][s];!o.isNone(t)&&a.cb!==t?n.push(a):o.isNone(a.id)||r.push(a.id)}return n.length===0?delete this.data[e]:this.data[e]=n,r}},T=p;var g=class{constructor(e=!1){this.enabled=e}setEnabled(e){this.enabled=e}isEnabled(){return this.enabled}debug(...e){this.enabled&&console.debug(...e)}log(...e){this.enabled&&console.log(...e)}warn(...e){this.enabled&&console.warn(...e)}error(...e){this.enabled&&console.error(...e)}};var h=g;var b=[],m=class{constructor(e,t=!1){if(this.READIED=b,o.isString(e)){let r=document.getElementById(e);if(!r)throw new Error(`Element with id "${e}" not found`);e=r}this.elem=e,this.debug=t,this.logger=new h(t),o.assert(e.nodeName==="IFRAME",'playerjs.Player constructor requires an Iframe, got "'+e.nodeName+'"'),o.assert(e.src,"playerjs.Player constructor requires a Iframe with a 'src' attribute."),this.origin=new URL(e.src).origin,this.keeper=new T,this.isReady=!1,this.queue=[],this.events=o.EVENTS.all(),this.methods=o.METHODS.all(),o.POST_MESSAGE?o.addEvent(window,"message",r=>{this.receive(r)}):this.logger.error("Post Message is not Available."),b.includes(e.src)?this.loaded=!0:this.elem.onload=()=>{this.loaded=!0}}send(e,t,r){if(e.context=o.CONTEXT,e.version=o.VERSION,t){let n=o.generateUUID();e.listener=n,this.keeper.one(n,e.method||"",t,r)}return!this.isReady&&e.value!=="ready"?(this.logger.debug("Player.queue",e),this.queue.push(e),!1):(this.logger.debug("Player.send",e,this.origin),this.loaded===!0&&this.elem.contentWindow&&this.elem.contentWindow.postMessage(JSON.stringify(e),this.origin),!0)}receive(e){if(this.logger.debug("Player.receive",e),e.origin!==this.origin)return!1;let t;try{t=JSON.parse(e.data)}catch(r){return!1}return t.context!==o.CONTEXT?!1:(t.event==="ready"&&t.value&&t.value.src===this.elem.src&&this.ready(t),this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this),!0)}ready(e){if(this.isReady===!0)return!1;e.value.events&&(this.events=e.value.events),e.value.methods&&(this.methods=e.value.methods),this.isReady=!0,this.loaded=!0;for(let t=0;t<this.queue.length;t++){let r=this.queue[t];this.logger.debug("Player.dequeue",r),e.event==="ready"&&this.keeper.execute(r.event||"",r.listener,!0,this),this.send(r)}return this.queue=[],!0}on(e,t,r){let n=o.generateUUID();return e==="ready"?this.keeper.one(n,e,t,r):this.keeper.on(n,e,t,r),this.send({method:"addEventListener",value:e,listener:n}),!0}off(e,t){let r=this.keeper.off(e,t);if(this.logger.debug("Player.off",r),r.length>0){for(let n in r)this.send({method:"removeEventListener",value:e,listener:r[n]});return!0}return!1}supports(e,t){o.assert(["method","event"].includes(e),'evtOrMethod needs to be either "event" or "method" got '+e),t=o.isArray(t)?t:[t];let r=e==="event"?this.events:this.methods;for(let n=0;n<t.length;n++)if(!r.includes(t[n]))return!1;return!0}};function O(i){return function(...e){let t={method:i};if(/^get/.test(i))if(e.length>0&&typeof e[0]=="function"){let r=e[0];this.send(t,r,e[1]);return}else return new Promise(r=>{this.send(t,n=>{r(n)})});else return/^set/.test(i)&&(o.assert(e.length!==0,"Set methods require a value."),t.value=e[0]),new Promise(r=>{["play","pause","mute","unmute"].includes(i)?(this.send(t),r()):this.send(t,()=>{r()})})}}for(let i of o.METHODS.all())Object.hasOwn(m.prototype,i)||(m.prototype[i]=O(i));o.addEvent(window,"message",i=>{let e;try{e=JSON.parse(i.data)}catch(t){return!1}if(e.context!==o.CONTEXT)return!1;e.event==="ready"&&e.value&&e.value.src&&b.push(e.value.src)});var P=m;var f=class{constructor(e,t,r=!1){this.isReady=!1,this.debug=r,this.logger=new h(r),document.referrer?this.origin=new URL(document.referrer).origin:this.origin="*",this.methods={},this.supported={events:e||o.EVENTS.all(),methods:t||o.METHODS.all()},this.eventListeners={},this.reject=!(window.self!==window.top&&o.POST_MESSAGE),this.reject||o.addEvent(window,"message",n=>{this.receive(n)})}receive(e){if(e.origin!==this.origin)return!1;let t={};if(typeof e.data=="object")t=e.data;else try{t=window.JSON.parse(e.data)}catch(n){this.logger.error("JSON Parse Error",n)}if(this.logger.debug("Receiver.receive",e,t),!t.method||t.context!==o.CONTEXT)return!1;if(!o.METHODS.all().includes(t.method))return this.emit("error",{code:2,msg:'Invalid Method "'+t.method+'"'}),!1;let r=o.isNone(t.listener)?null:t.listener;if(t.method==="addEventListener")Object.hasOwn(this.eventListeners,t.value)?this.eventListeners[t.value].includes(r)||this.eventListeners[t.value].push(r):this.eventListeners[t.value]=[r],t.value==="ready"&&this.isReady&&this.ready();else if(t.method==="removeEventListener"){if(Object.hasOwn(this.eventListeners,t.value)){let n=this.eventListeners[t.value].indexOf(r);n>-1&&this.eventListeners[t.value].splice(n,1),this.eventListeners[t.value].length===0&&delete this.eventListeners[t.value]}}else this.get(t.method,t.value,r);return!0}get(e,t,r){if(!Object.hasOwn(this.methods,e))return this.emit("error",{code:3,msg:'Method Not Supported "'+e+'"'}),!1;let n=this.methods[e];if(e.substr(0,3)==="get"){let s=a=>{this.send(e,a,r)};n.call(this,s)}else n.call(this,t);return!0}on(e,t){this.methods[e]=t}send(e,t,r){if(this.logger.debug("Receiver.send",e,t,r),this.reject)return this.logger.error("Receiver.send.reject",e,t,r),!1;let n={context:o.CONTEXT,version:o.VERSION,event:e};o.isNone(t)||(n.value=t),o.isNone(r)||(n.listener=r);let s=JSON.stringify(n);return window.parent.postMessage(s,this.origin===""?"*":this.origin),!0}emit(e,t){if(!Object.hasOwn(this.eventListeners,e))return!1;this.logger.debug("Receiver.emit",e,t,this.eventListeners[e]);for(let r=0;r<this.eventListeners[e].length;r++){let n=this.eventListeners[e][r];this.send(e,t,n)}return!0}ready(){this.logger.debug("Receiver.ready"),this.isReady=!0;let e={src:window.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)}},d=f;var v=class{constructor(){this.init()}init(){let e={duration:20,currentTime:0,interval:null,timeupdate:()=>{},volume:100,mute:!1,playing:!1,loop:!1,playbackRate:1,play:()=>{e.interval=setInterval(()=>{e.currentTime+=.25,e.timeupdate({seconds:e.currentTime,duration:e.duration})},250),e.playing=!0},pause:()=>{e.interval&&clearInterval(e.interval),e.playing=!1}},t=new d;this.receiver=t,t.on("play",function(){e.play(),this.emit("play"),e.timeupdate=r=>{this.emit("timeupdate",r)}}),t.on("pause",function(){e.pause(),this.emit("pause")}),t.on("getPaused",r=>{let n=!e.playing;r(n)}),t.on("getCurrentTime",r=>{r(e.currentTime)}),t.on("setCurrentTime",r=>{e.currentTime=r}),t.on("getDuration",r=>{r(e.duration)}),t.on("getVolume",r=>{r(e.volume)}),t.on("setVolume",r=>{e.volume=r}),t.on("mute",()=>{e.mute=!0}),t.on("unmute",()=>{e.mute=!1}),t.on("getMuted",r=>{r(e.mute)}),t.on("getLoop",r=>{r(e.loop)}),t.on("setLoop",r=>{e.loop=r}),t.on("setPlaybackRate",r=>{e.playbackRate=r}),t.on("getPlaybackRate",r=>{r(e.playbackRate)})}ready(){this.receiver.ready()}},M=v;var y=class{constructor(e){this.init(e)}init(e){o.assert(e,"VideoJSReceiver requires a player object");let t=new d;this.receiver=t,e.on("pause",()=>{t.emit("pause")}),e.on("play",()=>{t.emit("play")}),e.on("timeupdate",()=>{let r=e.currentTime(),n=e.duration();if(!r||!n)return!1;let s={seconds:r,duration:n};t.emit("timeupdate",s)}),e.on("ended",()=>{t.emit("ended")}),e.on("error",()=>{t.emit("error")}),t.on("play",()=>{e.play()}),t.on("pause",()=>{e.pause()}),t.on("getPaused",r=>{r(e.paused())}),t.on("getCurrentTime",r=>{r(e.currentTime())}),t.on("setCurrentTime",r=>{e.currentTime(r)}),t.on("getDuration",r=>{r(e.duration())}),t.on("getVolume",r=>{let n=e.volume()*100;r(n)}),t.on("setVolume",r=>{e.volume(r/100)}),t.on("mute",()=>{e.volume(0)}),t.on("unmute",()=>{e.volume(1)}),t.on("getMuted",r=>{let n=e.volume()===0;r(n)}),t.on("getLoop",r=>{r(e.loop())}),t.on("setLoop",r=>{e.loop(r)}),t.on("setPlaybackRate",r=>{e.playbackRate(r)}),t.on("getPlaybackRate",r=>{r(e.playbackRate())})}ready(){this.receiver.ready()}},R=y;var E=class{constructor(e){this.init(e)}init(e){o.assert(e,"HTML5Adapter requires a video element");let t=new d;this.receiver=t,e.addEventListener("playing",()=>{t.emit("play")}),e.addEventListener("pause",()=>{t.emit("pause")}),e.addEventListener("ended",()=>{t.emit("ended")}),e.addEventListener("timeupdate",()=>{t.emit("timeupdate",{seconds:e.currentTime,duration:e.duration})}),e.addEventListener("progress",()=>{t.emit("buffered",{percent:e.buffered.length})}),t.on("play",()=>{e.play()}),t.on("pause",()=>{e.pause()}),t.on("getPaused",r=>{r(e.paused)}),t.on("getCurrentTime",r=>{r(e.currentTime)}),t.on("setCurrentTime",r=>{e.currentTime=r}),t.on("getDuration",r=>{r(e.duration)}),t.on("getVolume",r=>{let n=e.volume*100;r(n)}),t.on("setVolume",r=>{e.volume=r/100}),t.on("mute",()=>{e.muted=!0}),t.on("unmute",()=>{e.muted=!1}),t.on("getMuted",r=>{r(e.muted)}),t.on("getLoop",r=>{r(e.loop)}),t.on("setLoop",r=>{e.loop=r}),t.on("setPlaybackRate",r=>{e.playbackRate=r}),t.on("getPlaybackRate",r=>{r(e.playbackRate)})}ready(){this.receiver.ready()}},S=E;var L={Player:P,Receiver:d,MockAdapter:M,VideoJSAdapter:R,HTML5Adapter:S,CONTEXT:o.CONTEXT,VERSION:o.VERSION,METHODS:o.METHODS,addEvent:o.addEvent};typeof window!="undefined"&&(window.playerjs=L);var Z=L;})();
//# sourceMappingURL=main.global.js.map