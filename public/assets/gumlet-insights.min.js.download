/*! For license information please see gumlet-insights.min.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a=e();for(var i in a)("object"==typeof exports?exports:t)[i]=a[i]}}(self,(()=>(()=>{var t={595:(t,e)=>{var a;a={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var i="string"==typeof t.initial?{state:t.initial}:t.initial,r=t.terminal||t.final,n=e||t.target||{},s=t.events||[],o=t.callbacks||{},l={},c={},u=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[a.WILDCARD];l[t.name]=l[t.name]||{};for(var i=0;i<e.length;i++)c[e[i]]=c[e[i]]||[],c[e[i]].push(t.name),l[t.name][e[i]]=t.to||e[i];t.to&&(c[t.to]=c[t.to]||[])};i&&(i.event=i.event||"startup",u({name:i.event,from:"none",to:i.state}));for(var m=0;m<s.length;m++)u(s[m]);for(var E in l)l.hasOwnProperty(E)&&(n[E]=a.buildEvent(E,l[E]));for(var E in o)o.hasOwnProperty(E)&&(n[E]=o[E]);return n.current="none",n.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},n.can=function(t){return!this.transition&&void 0!==l[t]&&(l[t].hasOwnProperty(this.current)||l[t].hasOwnProperty(a.WILDCARD))},n.cannot=function(t){return!this.can(t)},n.transitions=function(){return(c[this.current]||[]).concat(c[a.WILDCARD]||[])},n.isFinished=function(){return this.is(r)},n.error=t.error||function(t,e,a,i,r,n,s){throw s||n},n.states=function(){return Object.keys(c).sort()},i&&!i.defer&&n[i.event](),n},doCallback:function(t,e,i,r,n,s){if(e)try{return e.apply(t,[i,r,n].concat(s))}catch(e){return t.error(i,r,n,s,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,i,r,n){return a.doCallback(t,t.onbeforeevent,e,i,r,n)},afterAnyEvent:function(t,e,i,r,n){return a.doCallback(t,t.onafterevent||t.onevent,e,i,r,n)},leaveAnyState:function(t,e,i,r,n){return a.doCallback(t,t.onleavestate,e,i,r,n)},enterAnyState:function(t,e,i,r,n){return a.doCallback(t,t.onenterstate||t.onstate,e,i,r,n)},changeState:function(t,e,i,r,n){return a.doCallback(t,t.onchangestate,e,i,r,n)},beforeThisEvent:function(t,e,i,r,n){return a.doCallback(t,t["onbefore"+e],e,i,r,n)},afterThisEvent:function(t,e,i,r,n){return a.doCallback(t,t["onafter"+e]||t["on"+e],e,i,r,n)},leaveThisState:function(t,e,i,r,n){return a.doCallback(t,t["onleave"+i],e,i,r,n)},enterThisState:function(t,e,i,r,n){return a.doCallback(t,t["onenter"+r]||t["on"+r],e,i,r,n)},beforeEvent:function(t,e,i,r,n){if(!1===a.beforeThisEvent(t,e,i,r,n)||!1===a.beforeAnyEvent(t,e,i,r,n))return!1},afterEvent:function(t,e,i,r,n){a.afterThisEvent(t,e,i,r,n),a.afterAnyEvent(t,e,i,r,n)},leaveState:function(t,e,i,r,n){var s=a.leaveThisState(t,e,i,r,n),o=a.leaveAnyState(t,e,i,r,n);return!1!==s&&!1!==o&&(a.ASYNC===s||a.ASYNC===o?a.ASYNC:void 0)},enterState:function(t,e,i,r,n){a.enterThisState(t,e,i,r,n),a.enterAnyState(t,e,i,r,n)},buildEvent:function(t,e){return function(){var i=this.current,r=e[i]||(e[a.WILDCARD]!=a.WILDCARD?e[a.WILDCARD]:i)||i,n=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,i,r,n,a.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,i,r,n,a.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,t,i,r,n))return a.Result.CANCELLED;if(i===r)return a.afterEvent(this,t,i,r,n),a.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=r,a.enterState(s,t,i,r,n),a.changeState(s,t,i,r,n),a.afterEvent(s,t,i,r,n),a.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,a.afterEvent(s,t,i,r,n)};var o=a.leaveState(this,t,i,r,n);return!1===o?(this.transition=null,a.Result.CANCELLED):a.ASYNC===o?a.Result.PENDING:this.transition?this.transition():void 0}}},t.exports&&(e=t.exports=a),e.StateMachine=a},503:function(t,e,a){var i;t=a.nmd(t),function(){"use strict";var r={function:!0,object:!0},n=r[typeof window]&&window||this,s=r[typeof e]&&e,o=r.object&&t&&!t.nodeType&&t,l=s&&o&&"object"==typeof a.g&&a.g;!l||l.global!==l&&l.window!==l&&l.self!==l||(n=l);var c=Math.pow(2,53)-1,u=/\bOpera/,m=Object.prototype,E=m.hasOwnProperty,h=m.toString;function S(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function d(t){return t=v(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:S(t)}function f(t,e){for(var a in t)E.call(t,a)&&e(t[a],a,t)}function p(t){return null==t?S(t):h.call(t).slice(8,-1)}function y(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function A(t,e){var a=null;return function(t,e){var a=-1,i=t?t.length:0;if("number"==typeof i&&i>-1&&i<=c)for(;++a<i;)e(t[a],a,t);else f(t,e)}(t,(function(i,r){a=e(a,i,r,t)})),a}function v(t){return String(t).replace(/^ +| +$/g,"")}var _=function t(e){var a=n,i=e&&"object"==typeof e&&"String"!=p(e);i&&(a=e,e=null);var r=a.navigator||{},s=r.userAgent||"";e||(e=s);var o,l,c,m,E,S=i?!!r.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(h.toString()),_="Object",b=i?_:"ScriptBridgingProxyObject",N=i?_:"Environment",T=i&&a.java?"JavaPackage":p(a.java),g=i?_:"RuntimeObject",D=/\bJava/.test(T)&&a.java,I=D&&p(a.environment)==N,P=D?"a":"α",C=D?"b":"β",U=a.document||{},G=a.operamini||a.opera,R=u.test(R=i&&G?G["[[Class]]"]:p(G))?R:G=null,L=e,k=[],Y=null,O=e==s,w=O&&G&&"function"==typeof G.version&&G.version(),F=A([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,a){return t||RegExp("\\b"+(a.pattern||y(a))+"\\b","i").exec(e)&&(a.label||a)})),M=function(t){return A(t,(function(t,a){return t||RegExp("\\b"+(a.pattern||y(a))+"\\b","i").exec(e)&&(a.label||a)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),H=B([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=function(t){return A(t,(function(t,a,i){return t||(a[H]||a[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+y(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),V=function(t){return A(t,(function(t,a){var i=a.pattern||y(a);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,a){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&a&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(i=i[/[\d.]+$/.exec(t)])&&(t="Windows "+i),t=String(t),e&&a&&(t=t.replace(RegExp(e,"i"),a)),d(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,i,a.label||a)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function B(t){return A(t,(function(t,a){var i=a.pattern||y(a);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(a.label&&!RegExp(i,"i").test(a.label)?a.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),a=a.label||a,t=d(t[0].replace(RegExp(i,"i"),a).replace(RegExp("; *(?:"+a+"[_-])?","i")," ").replace(RegExp("("+a+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function j(t){return A(t,(function(t,a){return t||(RegExp(a+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(F&&(F=[F]),/\bAndroid\b/.test(V)&&!H&&(o=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(H=v(o[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),K&&!H?H=B([K]):K&&H&&(H=H.replace(RegExp("^("+y(K)+")[-_.\\s]","i"),K+" ").replace(RegExp("^("+y(K)+")[-_.]?(\\w)","i"),K+" $2")),(o=/\bGoogle TV\b/.exec(H))&&(H=o[0]),/\bSimulator\b/i.test(e)&&(H=(H?H+" ":"")+"Simulator"),"Opera Mini"==M&&/\bOPiOS\b/.test(e)&&k.push("running in Turbo/Uncompressed mode"),"IE"==M&&/\blike iPhone OS\b/.test(e)?(K=(o=t(e.replace(/like iPhone OS/,""))).manufacturer,H=o.product):/^iP/.test(H)?(M||(M="Safari"),V="iOS"+((o=/ OS ([\d_]+)/i.exec(e))?" "+o[1].replace(/_/g,"."):"")):"Konqueror"==M&&/^Linux\b/i.test(V)?V="Kubuntu":K&&"Google"!=K&&(/Chrome/.test(M)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(H))||/\bAndroid\b/.test(V)&&/^Chrome/.test(M)&&/\bVersion\//i.test(e)?(M="Android Browser",V=/\bAndroid\b/.test(V)?V:"Android"):"Silk"==M?(/\bMobi/i.test(e)||(V="Android",k.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&k.unshift("accelerated")):"UC Browser"==M&&/\bUCWEB\b/.test(e)?k.push("speed mode"):"PaleMoon"==M&&(o=/\bFirefox\/([\d.]+)\b/.exec(e))?k.push("identifying as Firefox "+o[1]):"Firefox"==M&&(o=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(V||(V="Firefox OS"),H||(H=o[1])):!M||(o=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(M))?(M&&!H&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(o+"/")+8))&&(M=null),(o=H||K||V)&&(H||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(V))&&(M=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(V)?V:o)+" Browser")):"Electron"==M&&(o=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&k.push("Chromium "+o),w||(w=j(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(M),"(?:Firefox|Minefield|NetFront)"])),(o=("iCab"==F&&parseFloat(w)>3?"WebKit":/\bOpera\b/.test(M)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(e)&&("Mac OS"==V?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(M)&&"NetFront")&&(F=[o]),"IE"==M&&(o=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(M+=" Mobile",V="Windows Phone "+(/\+$/.test(o)?o:o+".x"),k.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(M="IE Mobile",V="Windows Phone 8.x",k.unshift("desktop mode"),w||(w=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=M&&"Trident"==F&&(o=/\brv:([\d.]+)/.exec(e))&&(M&&k.push("identifying as "+M+(w?" "+w:"")),M="IE",w=o[1]),O){if(m="global",E=null!=(c=a)?typeof c[m]:"number",/^(?:boolean|number|string|undefined)$/.test(E)||"object"==E&&!c[m])p(o=a.runtime)==b?(M="Adobe AIR",V=o.flash.system.Capabilities.os):p(o=a.phantom)==g?(M="PhantomJS",w=(o=o.version||null)&&o.major+"."+o.minor+"."+o.patch):"number"==typeof U.documentMode&&(o=/\bTrident\/(\d+)/i.exec(e))?(w=[w,U.documentMode],(o=+o[1]+4)!=w[1]&&(k.push("IE "+w[1]+" mode"),F&&(F[1]=""),w[1]=o),w="IE"==M?String(w[1].toFixed(1)):w[0]):"number"==typeof U.documentMode&&/^(?:Chrome|Firefox)\b/.test(M)&&(k.push("masking as "+M+" "+w),M="IE",w="11.0",F=["Trident"],V="Windows");else if(D&&(L=(o=D.lang.System).getProperty("os.arch"),V=V||o.getProperty("os.name")+" "+o.getProperty("os.version")),I){try{w=a.require("ringo/engine").version.join("."),M="RingoJS"}catch(t){(o=a.system)&&o.global.system==a.system&&(M="Narwhal",V||(V=o[0].os||null))}M||(M="Rhino")}else"object"==typeof a.process&&!a.process.browser&&(o=a.process)&&("object"==typeof o.versions&&("string"==typeof o.versions.electron?(k.push("Node "+o.versions.node),M="Electron",w=o.versions.electron):"string"==typeof o.versions.nw&&(k.push("Chromium "+w,"Node "+o.versions.node),M="NW.js",w=o.versions.nw)),M||(M="Node.js",L=o.arch,V=o.platform,w=(w=/[\d.]+/.exec(o.version))?w[0]:null));V=V&&d(V)}if(w&&(o=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(w)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(O&&r.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(Y=/b/i.test(o)?"beta":"alpha",w=w.replace(RegExp(o+"\\+?$"),"")+("beta"==Y?C:P)+(/\d+\+?/.exec(o)||"")),"Fennec"==M||"Firefox"==M&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(V))M="Firefox Mobile";else if("Maxthon"==M&&w)w=w.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(H))"Xbox 360"==H&&(V=null),"Xbox 360"==H&&/\bIEMobile\b/.test(e)&&k.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(M)&&(!M||H||/Browser|Mobi/.test(M))||"Windows CE"!=V&&!/Mobi/i.test(e))if("IE"==M&&O)try{null===a.external&&k.unshift("platform preview")}catch(t){k.unshift("embedded")}else(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(e))&&(o=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||w)?(V=((o=[o,/BB10/.test(e)])[1]?(H=null,K="BlackBerry"):"Device Software")+" "+o[0],w=null):this!=f&&"Wii"!=H&&(O&&G||/Opera/.test(M)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==M&&/\bOS X (?:\d+\.){2,}/.test(V)||"IE"==M&&(V&&!/^Win/.test(V)&&w>5.5||/\bWindows XP\b/.test(V)&&w>8||8==w&&!/\bTrident\b/.test(e)))&&!u.test(o=t.call(f,e.replace(u,"")+";"))&&o.name&&(o="ing as "+o.name+((o=o.version)?" "+o:""),u.test(M)?(/\bIE\b/.test(o)&&"Mac OS"==V&&(V=null),o="identify"+o):(o="mask"+o,M=R?d(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(o)&&(V=null),O||(w=null)),F=["Presto"],k.push(o));else M+=" Mobile";(o=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(o=[parseFloat(o.replace(/\.(\d)$/,".0$1")),o],"Safari"==M&&"+"==o[1].slice(-1)?(M="WebKit Nightly",Y="alpha",w=o[1].slice(0,-1)):w!=o[1]&&w!=(o[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(w=null),o[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==o[0]&&537.36==o[2]&&parseFloat(o[1])>=28&&"WebKit"==F&&(F=["Blink"]),O&&(S||o[1])?(F&&(F[1]="like Chrome"),o=o[1]||((o=o[0])<530?1:o<532?2:o<532.05?3:o<533?4:o<534.03?5:o<534.07?6:o<534.1?7:o<534.13?8:o<534.16?9:o<534.24?10:o<534.3?11:o<535.01?12:o<535.02?"13+":o<535.07?15:o<535.11?16:o<535.19?17:o<536.05?18:o<536.1?19:o<537.01?20:o<537.11?"21+":o<537.13?23:o<537.18?24:o<537.24?25:o<537.36?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),o=(o=o[0])<400?1:o<500?2:o<526?3:o<533?4:o<534?"4+":o<535?5:o<537?6:o<538?7:o<601?8:o<602?9:o<604?10:o<606?11:o<608?12:"12"),F&&(F[1]+=" "+(o+="number"==typeof o?".x":/[.+]/.test(o)?"":"+")),"Safari"==M&&(!w||parseInt(w)>45)?w=o:"Chrome"==M&&/\bHeadlessChrome/i.test(e)&&k.unshift("headless")),"Opera"==M&&(o=/\bzbov|zvav$/.exec(V))?(M+=" ",k.unshift("desktop mode"),"zvav"==o?(M+="Mini",w=null):M+="Mobile",V=V.replace(RegExp(" *"+o+"$"),"")):"Safari"==M&&/\bChrome\b/.exec(F&&F[1])?(k.unshift("desktop mode"),M="Chrome Mobile",w=null,/\bOS X\b/.test(V)?(K="Apple",V="iOS 4.3+"):V=null):/\bSRWare Iron\b/.test(M)&&!w&&(w=j("Chrome")),w&&0==w.indexOf(o=/[\d.]+$/.exec(V))&&e.indexOf("/"+o+"-")>-1&&(V=v(V.replace(o,""))),V&&-1!=V.indexOf(M)&&!RegExp(M+" OS").test(V)&&(V=V.replace(RegExp(" *"+y(M)+" *"),"")),F&&!/\b(?:Avant|Nook)\b/.test(M)&&(/Browser|Lunascape|Maxthon/.test(M)||"Safari"!=M&&/^iOS/.test(V)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(M)&&F[1])&&(o=F[F.length-1])&&k.push(o),k.length&&(k=["("+k.join("; ")+")"]),K&&H&&H.indexOf(K)<0&&k.push("on "+K),H&&k.push((/^on /.test(k[k.length-1])?"":"on ")+H),V&&(o=/ ([\d.+]+)$/.exec(V),l=o&&"/"==V.charAt(V.length-o[0].length-1),V={architecture:32,family:o&&!l?V.replace(o[0],""):V,version:o?o[1]:null,toString:function(){var t=this.version;return this.family+(t&&!l?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(o=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(L))&&!/\bi686\b/i.test(L)?(V&&(V.architecture=64,V.family=V.family.replace(RegExp(" *"+o),"")),M&&(/\bWOW64\b/i.test(e)||O&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(e))&&k.unshift("32-bit")):V&&/^OS X/.test(V.family)&&"Chrome"==M&&parseFloat(w)>=39&&(V.architecture=64),e||(e=null);var W={};return W.description=e,W.layout=F&&F[0],W.manufacturer=K,W.name=M,W.prerelease=Y,W.product=H,W.ua=e,W.version=M&&w,W.os=V||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=t,W.toString=function(){return this.description||""},W.version&&k.unshift(w),W.name&&k.unshift(M),V&&M&&(V!=String(V).split(" ")[0]||V!=M.split(" ")[0]&&!H)&&k.push(H?"("+V+")":"on "+V),k.length&&(W.description=k.join(" ")),W}();n.platform=_,void 0===(i=function(){return _}.call(e,a,e,t))||(t.exports=i)}.call(this)}},e={};function a(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};return(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}a.r(i),a.d(i,{default:()=>Ra});var e=function(){return(new Date).getTime()},r=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16).toUpperCase()}))},n=function(t,e){var a,i=0;return function(){return i>=e||(a=t.apply(null,arguments),i++),a}},s=function(e){return"object"===t(e)?JSON.stringify(e):"function"==typeof e?s(e()):void 0===e?e:"string"!=typeof e?String(e):e};const o={validString:function(t){return null!=t&&"string"==typeof t},validBoolean:function(t){return null!=t&&"boolean"==typeof t},validNumber:function(t){return null!=t&&"number"==typeof t},sanitizePath:function(t){return t.replace(/\/$/g,"")},calculateTime:function(t){return t*=1e3,Math.round(t)},getCurrentTimestamp:e,getDurationFromTimestampToNow:function(t){return e()-t},uuidv4:r,getCookie:function(t){var e=t+"=",a=[];try{a=document.cookie.split(";")}catch(t){return""}for(var i="",r=0;r<a.length;r++){for(var n=a[r];" "==n.charAt(0);)n=n.substring(1);0==n.indexOf(e)&&(i=n.substring(e.length,n.length))}if(!i){try{i=localStorage.getItem(t)}catch(t){return""}var s=null;if(!i)return"";try{s=JSON.parse(i)}catch(t){return""}var o=null;if(!s.expires)return"";if(o=new Date(s.expires),"[object Date]"!==Object.prototype.toString.call(o))return"";if(isNaN(o))return"";if(!(o.getTime()>(new Date).getTime()))return"";i=s.value?s.value:""}return i},setCookie:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new Date;i.setTime(i.getTime()+60*e*1e3);var n=a||r();try{document.cookie=t+"="+n+"; expires="+i.toUTCString()+"; path=/",localStorage.setItem(t,JSON.stringify({expires:i.getTime(),value:n}))}catch(t){}return n},noOp:function(){},times:n,once:function(t){return n(t,1)},getHiddenProp:function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null},getCustomDataString:s,jsonToQueryString:function(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},currentDateTimeFormatString:function(){return(new Date).toISOString()},convertEpochTime:function(t){var e=t.toString().length;if(13==e)return t;var a=13-e;return t*Math.pow(10,a)}};function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,u(i.key),i)}}function u(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}const m=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"get",value:function(t,e,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.z=(new Date).getTime()/1e3;var r,n=[void 0,null,!1];Object.keys(e).forEach((function(t){return-1!==n.indexOf(e[t])&&delete e[t]})),Object.keys(e).forEach((function(t){return e[t]!=e[t]&&delete e[t]}));var s=!1;window.XDomainRequest&&(s=!0),r=s?new window.XDomainRequest:new XMLHttpRequest;var l=function(){if(r.readyState==XMLHttpRequest.DONE){if(r.responseText<=0)return;a(r.responseText)}};s?r.onload=l:r.onreadystatechange=l,t+=o.jsonToQueryString(e),r.open("GET",t,i),r.send(null)}},{key:"asyncGet",value:function(t,e){return new Promise((function(a,i){e.z=(new Date).getTime()/1e3;var r,n=[void 0,null,!1];Object.keys(e).forEach((function(t){return-1!==n.indexOf(e[t])&&delete e[t]})),Object.keys(e).forEach((function(t){return e[t]!=e[t]&&delete e[t]}));var s=!1;window.XDomainRequest&&(s=!0),(r=s?new window.XDomainRequest:new XMLHttpRequest).onload=function(){this.status>=200&&this.status<300?a(r.response):i({status:this.status,statusText:r.statusText})};var l=o.jsonToQueryString(e);t+=l,r.open("GET",t),r.onerror=function(){i({status:this.status,statusText:r.statusText})},r.send()}))}}],e&&c(t.prototype,e),a&&c(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();var E="urn:x-cast:com.gumlet.ingest.cast",h="https://ingest.gumlytics.com",S=1e4;function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,b(i.key),i)}}function p(t,e,a){return e=A(e),function(t,e){if(e&&("object"==d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,a||[],A(t).constructor):e.apply(t,a))}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function _(t,e,a){return(e=b(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function b(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:e+""}var N=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return _(t=p(this,e,[].concat(i)),"sendRequest",(function(t,a,i,r){var n={key:t,domain:a,analyticsVersion:i};this.get(e.licenseServerUrl,n,r)})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(e,t),a=e,i&&f(a.prototype,i),r&&f(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(m);_(N,"licenseServerUrl",h+"/licensing");function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function g(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,G(i.key),i)}}function D(t,e,a){return e=P(e),function(t,e){if(e&&("object"==T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I()?Reflect.construct(e,a||[],P(t).constructor):e.apply(t,a))}function I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I=function(){return!!t})()}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function U(t,e,a){return(e=G(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function G(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=T(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T(e)?e:e+""}var R=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return U(t=D(this,e,[].concat(i)),"sendRequest",(function(t,a){t.event_family="session_event",this.get(e.analyticsServerUrl,t,a)})),U(t,"sendRequestAsync",(function(t){var a=this;return t.event_family="session_event",new Promise((function(i,r){a.asyncGet(e.analyticsServerUrl,t).then((function(t){i(t)})).catch((function(t){r(t)}))}))})),U(t,"sendRequestSynchronous",(function(t,a){t.event_family="session_event",this.get(e.analyticsServerUrl,t,a,!1)})),U(t,"getAnalyticsServerUrl",(function(){return e.analyticsServerUrl})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(e,t),a=e,i&&g(a.prototype,i),r&&g(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(m);U(R,"analyticsServerUrl",h);const L=R;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function Y(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,K(i.key),i)}}function O(t,e,a){return e=F(e),function(t,e){if(e&&("object"==k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,a||[],F(t).constructor):e.apply(t,a))}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function H(t,e,a){return(e=K(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function K(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=k(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}var V=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return H(t=O(this,e,[].concat(i)),"sendRequest",(function(t,a){t.event_family="session",this.get(e.analyticsServerUrl,t,a)})),H(t,"sendRequestSynchronous",(function(t,a){t.event_family="session",this.get(e.analyticsServerUrl,t,a,!1)})),H(t,"getAnalyticsServerUrl",(function(){return e.analyticsServerUrl})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),a=e,i&&Y(a.prototype,i),r&&Y(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(m);H(V,"analyticsServerUrl",h);const B=V;function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function W(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,X(i.key),i)}}function x(t,e,a){return e=q(e),function(t,e){if(e&&("object"==j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Q()?Reflect.construct(e,a||[],q(t).constructor):e.apply(t,a))}function Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Q=function(){return!!t})()}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function $(t,e,a){return(e=X(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function X(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=j(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j(e)?e:e+""}var z=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return $(t=x(this,e,[].concat(i)),"sendRequest",(function(t,a){t.event_family="player_init",this.get(e.analyticsServerUrl,t,a)})),$(t,"sendRequestSynchronous",(function(t,a){t.event_family="player_init",this.get(e.analyticsServerUrl,t,a,!1)})),$(t,"getAnalyticsServerUrl",(function(){return e.analyticsServerUrl})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(e,t),a=e,i&&W(a.prototype,i),r&&W(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(m);$(z,"analyticsServerUrl",h);const Z=z;const tt=function(){var t=window.navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"mobile":"desktop"};function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function at(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,rt(i.key),i)}}function it(t,e,a){return(e=rt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rt(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=et(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==et(e)?e:e+""}const nt=new(function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,"log",(function(t){this.showLogs&&console.log(t)})),it(this,"error",(function(t){this.showLogs&&console.error(t)})),it(this,"warning",(function(t){this.showLogs&&console.warn(t)})),this.showLogs=e},(e=[{key:"setLogging",value:function(t){this.showLogs=t}},{key:"isLogging",value:function(){return this.showLogs}}])&&at(t.prototype,e),a&&at(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}());var st;function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function lt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ut(i.key),i)}}function ct(t,e,a){return(e=ut(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ut(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=ot(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ot(e)?e:e+""}var mt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},a=[{key:"isShaka",value:function(t){return!!window.shaka&&"function"==typeof shaka.Player&&t.constructor===shaka.Player}},{key:"isDashjs",value:function(t){return"function"==typeof t.addABRCustomRule}},{key:"isHlsjs",value:function(t){return!!window.Hls&&"function"==typeof window.Hls&&t.constructor===window.Hls}}],(e=null)&&lt(t.prototype,e),a&&lt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();st=mt,ct(mt,"isBitmovinVersionPre7",(function(t){return!st.isDashjs(t)&&("function"==typeof t.getVersion&&t.getVersion()<"7")})),ct(mt,"isBitmovinVersion7Plus",(function(t){return"string"==typeof t.version&&t.version>="7"})),ct(mt,"isVideoJs",(function(t){if("function"==typeof videojs)try{if(videojs(t.id_)===t)return!0}catch(t){}return!1}));const Et=mt;const ht={READY:"ready",STARTUP:"startup",SOURCE_LOADED:"sourceLoaded",PLAY:"play",PAUSE:"pause",TIMECHANGED:"timechanged",SEEK:"seek",SEEKED:"seeked",START_CAST:"startCasting",END_CAST:"endCasting",START_BUFFERING:"startBuffering",END_BUFFERING:"endBuffering",AUDIO_CHANGE:"audioChange",VIDEO_CHANGE:"videoChange",START_FULLSCREEN:"startFullscreen",END_FULLSCREEN:"endFullscreen",START_AD:"adStart",END_AD:"adEnd",MUTE:"mute",UN_MUTE:"unMute",ERROR:"playerError",PLAYBACK_FINISHED:"end",SCREEN_RESIZE:"resize",UNLOAD:"unload",END:"end",METADATA_LOADED:"metadataLoaded",SOURCE_UNLOADED:"sourceUnloaded",PLAYBACK_PLAYING:"playback_playing"};function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function dt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ft(i.key),i)}}function ft(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=St(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==St(e)?e:e+""}const pt=function(){return t=function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.register()},(e=[{key:"register",value:function(){var t=this;this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,(function(){t.eventCallback(ht.SOURCE_LOADED)})),this.player.addEventHandler(this.player.EVENT.ON_READY,(function(){var e=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(e=t.player.getConfig().playback.autoplay),t.eventCallback(ht.READY,{isLive:t.player.isLive(),version:t.player.getVersion(),type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),videoId:t.player.getConfig().source.videoId,userId:t.player.getConfig().source.userId,mpdUrl:t.player.getConfig().source.dash,m3u8Url:t.player.getConfig().source.hls,progUrl:t.player.getConfig().source.progressive,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:e})})),this.player.addEventHandler(this.player.EVENT.ON_CAST_START,(function(){t.eventCallback(ht.START_CAST)})),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOP,(function(){t.eventCallback(ht.END_CAST)})),this.player.addEventHandler(this.player.EVENT.ON_PLAY,(function(){t.eventCallback(ht.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_PAUSE,(function(){t.eventCallback(ht.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,(function(){t.eventCallback(ht.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEK,(function(){t.eventCallback(ht.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,(function(){t.eventCallback(ht.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_START_BUFFERING,(function(){t.eventCallback(ht.START_BUFFERING)})),this.player.addEventHandler(this.player.EVENT.ON_STOP_BUFFERING,(function(){t.eventCallback(ht.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGE,(function(){var e=t.player.getPlaybackAudioData();t.eventCallback(ht.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGE,(function(){var e=t.player.getPlaybackVideoData();t.eventCallback(ht.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,(function(){t.eventCallback(ht.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.onBeforeUnLoadEvent=!1,this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,(function(){t.eventCallback(ht.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,(function(){t.eventCallback(ht.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,(function(){t.eventCallback(ht.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_MUTE,(function(){t.eventCallback(ht.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_UNMUTE,(function(){t.eventCallback(ht.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_ERROR,(function(e){t.eventCallback(ht.ERROR,{code:e&&e.code,message:e&&e.message})})),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,(function(){t.eventCallback(ht.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),"undefined"!=typeof window?window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(ht.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}:this.onBeforeUnLoadEvent||(this.onBeforeUnLoadEvent=!0,this.eventCallback(ht.UNLOAD,{currentTime:this.player.getCurrentTime(),droppedFrames:this.player.getDroppedFrames()}))}}])&&dt(t.prototype,e),a&&dt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function At(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,vt(i.key),i)}}function vt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=yt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yt(e)?e:e+""}const _t=function(){return t=function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.register()},(e=[{key:"register",value:function(){var t=this,e=function(e){if(!e)return{progUrl:void 0,progBitrate:void 0};if("string"==typeof e)return{progUrl:e,progBitrate:0};if(Array.isArray(e)){var a=t.player.getPlaybackVideoData(),i=parseInt(a.id)||0;return{progUrl:e[i].url,progBitrate:e[i].bitrate||0}}return"object"===yt(e)?{progUrl:e.url,progBitrate:e.bitrate||0}:void 0};this.player.addEventHandler(this.player.EVENT.ON_SOURCE_UNLOADED,(function(e){t.eventCallback(ht.SOURCE_UNLOADED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,(function(a){var i=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(i=t.player.getConfig().playback.autoplay);var r=t.player.getConfig(),n={},s=e(r.source.progressive);r.source&&(n={mpdUrl:r.source.dash,m3u8Url:r.source.hls,progUrl:s.progUrl,progBitrate:s.progBitrate}),t.eventCallback(ht.SOURCE_LOADED,{isLive:t.player.isLive(),version:t.player.version,type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),mpdUrl:n.mpdUrl,m3u8Url:n.m3u8Url,progUrl:n.progUrl,progBitrate:n.progBitrate,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:i})})),this.player.addEventHandler(this.player.EVENT.ON_READY,(function(){var a=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(a=t.player.getConfig().playback.autoplay);var i=t.player.getConfig(),r={},n=e(i.source.progressive);i.source&&(r={videoId:i.source.videoId,userId:i.source.userId,mpdUrl:i.source.dash,m3u8Url:i.source.hls,progUrl:n.progUrl,progBitrate:n.progBitrate});var s=!0;null!=t.player.getConfig().adaptation.preload&&"boolean"==typeof t.player.getConfig().adaptation.preload&&(s=t.player.getConfig().adaptation.preload);var o=t.player.getAudio();o||(o="undetected"),t.eventCallback(ht.READY,{isLive:t.player.isLive(),version:t.player.version,type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),videoId:r.videoId,userId:r.userId,mpdUrl:r.mpdUrl,m3u8Url:r.m3u8Url,progUrl:r.progUrl,progBitrate:r.progBitrate,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),preload:s,audioLanguage:o,isFullScreen:t.player.isFullscreen(),autoplay:a})})),this.player.addEventHandler(this.player.EVENT.ON_CAST_STARTED,(function(e){t.eventCallback(ht.START_CAST,e)})),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOPPED,(function(){t.eventCallback(ht.END_CAST,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_PLAY,(function(){t.eventCallback(ht.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_PAUSED,(function(){t.eventCallback(ht.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,(function(){t.eventCallback(ht.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEK,(function(){t.eventCallback(ht.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,(function(){t.eventCallback(ht.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_STALL_STARTED,(function(){t.eventCallback(ht.START_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_STALL_ENDED,(function(){t.eventCallback(ht.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGED,(function(){var e=t.player.getPlaybackAudioData();t.eventCallback(ht.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGED,(function(){var e=t.player.getPlaybackVideoData();t.eventCallback(ht.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,(function(){t.eventCallback(ht.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,(function(){t.eventCallback(ht.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,(function(){t.eventCallback(ht.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,(function(){t.eventCallback(ht.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_MUTED,(function(){t.eventCallback(ht.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_UNMUTED,(function(){t.eventCallback(ht.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_ERROR,(function(e){t.eventCallback(ht.ERROR,{code:e&&e.code,message:e&&e.message,currentTime:t.player.getCurrentTime()})})),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,(function(){t.eventCallback(ht.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),"undefined"!=typeof window?window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(ht.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}:this.onBeforeUnLoadEvent||(this.onBeforeUnLoadEvent=!0,this.eventCallback(ht.UNLOAD,{currentTime:this.player.getCurrentTime(),droppedFrames:this.player.getDroppedFrames()}))}}])&&At(t.prototype,e),a&&At(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function Nt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Tt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(a),!0).forEach((function(e){gt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function gt(t,e,a){return(e=It(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Dt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,It(i.key),i)}}function It(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=bt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}const Pt=function(){return t=function t(e,a,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.stateMachine=i,this.register()},(e=[{key:"getStreamType",value:function(t){return t.endsWith(".m3u8")?"hls":t.endsWith(".mpd")?"dash":"progressive"}},{key:"getStreamSources",value:function(t){var e=null,a=null,i=null;switch(this.getStreamType(t)){case"hls":a=t;break;case"dash":e=t;break;default:i=t}return{mpdUrl:e,m3u8Url:a,progUrl:i}}},{key:"getVideoWindowDimensions",value:function(t){return{width:t.el_.clientWidth,height:t.el_.clientHeight}}},{key:"getVideoSourceDimensions",value:function(t){return{videoWidth:t.videoWidth(),videoHeight:t.videoHeight()}}},{key:"getVideojsSourceHandlerMode_",value:function(){var t=this.player.tech({IWillNotUseThisInPlugins:!0});return t.sourceHandler_?t.sourceHandler_.options_.mode:"native"}},{key:"register",value:function(){var t,e,a=this,i=this;this.player.on("loadedmetadata",(function(){var t=i.getStreamType(this.currentSrc()),e=i.getStreamSources(this.currentSrc()),a=i.getVideojsSourceHandlerMode_(),r=Tt(Tt(Tt({isLive:this.duration()===1/0,version:videojs.VERSION,type:a,duration:this.duration(),streamType:t,autoplay:this.autoplay()},e),i.getVideoWindowDimensions(this)),{},{videoWindowWidth:this.videoWidth(),videoWindowHeight:this.videoHeight(),muted:this.muted()});i.stateMachine.updateMetadata(r),i.eventCallback(ht.SOURCE_LOADED,r)})),this.player.on("loadeddata",(function(){})),this.player.ready((function(){var t=i.getStreamType(this.currentSrc()),e=i.getStreamSources(this.currentSrc()),a=i.getVideojsSourceHandlerMode_(),r=i.getVideoWindowDimensions(this),n={width:null,height:null,bitrate:null};if(this.tech_.hls){var s=this.tech_.hls.playlists.media();if(s){var o=s.attributes;n.bitrate=o.BANDWIDTH,n.width=o.RESOLUTION.width,n.height=o.RESOLUTION.height,n.videoCodec=o.CODECS.split(",")[0],n.audioCodec=o.CODECS.split(",")[1]}}var l=Tt(Tt(Tt({isLive:!1,version:videojs.VERSION,type:a,duration:this.duration(),streamType:t,autoplay:this.autoplay()},e),i.getVideoWindowDimensions(this)),{},{videoWindowWidth:r.width,videoWindowHeight:r.height,muted:this.muted(),currentVideoData:n});i.eventCallback(ht.READY,l)})),this.player.on("play",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ht.PLAY,{currentTime:this.currentTime(),currentVideoData:t})})),this.player.on("pause",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ht.PAUSE,{currentTime:this.currentTime(),currentVideoData:t})})),this.player.on("ended",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ht.END,{currentTime:this.currentTime()})})),this.player.on("error",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height}}var r=this.player().error();i.eventCallback(ht.ERROR,{currentTime:this.currentTime(),code:r?r.code:-1,message:r?r.message:"Unknown error"})})),this.player.on("volumechange",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}this.muted()?i.eventCallback(ht.MUTE,{currentTime:this.currentTime(),currentVideoData:t}):i.eventCallback(ht.UN_MUTE,{currentTime:this.currentTime(),currentVideoData:t})})),this.player.on("seeking",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ht.SEEK,{currentTime:this.currentTime(),droppedFrames:0,currentVideoData:t})})),this.player.on("seeked",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ht.SEEKED,{currentTime:this.currentTime(),droppedFrames:0,currentVideoData:t})})),Date.now();var r=!1;this.player.on("timeupdate",(function(){var a=this;clearTimeout(e),r=!1,Date.now();var n={width:null,height:null,bitrate:null},s=null;if(this.tech_.hls&&(s=this.tech_.hls.playlists.media())){var o=s.attributes;n.bitrate=o.BANDWIDTH,n.width=o.RESOLUTION.width,n.height=o.RESOLUTION.height,n.videoCodec=o.CODECS.split(",")[0],n.audioCodec=o.CODECS.split(",")[1]}if(i.eventCallback(ht.TIMECHANGED,{currentTime:this.currentTime(),currentVideoData:n}),s){var l=s.attributes,c=l.BANDWIDTH,u=l.RESOLUTION.width,m=l.RESOLUTION.height,E=l.CODECS.split(",")[0],h=l.CODECS.split(",")[1];if(t!==c){var S={width:u,height:m,bitrate:c,videoCodec:E,audioCodec:h,currentTime:this.currentTime(),currentVideoData:n};i.eventCallback(ht.VIDEO_CHANGE,S),t=c}if(e=setTimeout((function(){(!a.paused()&&!a.ended()||r)&&i.eventCallback(ht.START_BUFFERING,{currentTime:a.currentTime()})}),1e3),this.tech({IWillNotUseThisInPlugins:!0}).hls){var d=this.tech_.hls;if(!d.playlists||"function"!=typeof d.playlists.media)return;var f=d.playlists.media();if(!f)return;var p=f.attributes,y=p.BANDWIDTH,A=p.RESOLUTION.width,v=p.RESOLUTION.height,_={width:A,height:v,bitrate:y,videoCodec:p.CODECS.split(",")[0],audioCodec:p.CODECS.split(",")[1]};if(isNaN(t)||t!==y){var b={width:A,height:v,bitrate:y,currentTime:this.currentTime(),currentVideoData:_};i.eventCallback(ht.VIDEO_CHANGE,b),t=y}}}})),this.player.on("stalled",(function(){r=!0})),"undefined"!=typeof window?window.onunload=window.onbeforeunload=function(){a.onBeforeUnLoadEvent||(a.onBeforeUnLoadEvent=!0,a.eventCallback(ht.UNLOAD,{currentTime:a.player.currentTime()}))}:this.onBeforeUnLoadEvent||(this.onBeforeUnLoadEvent=!0,this.eventCallback(ht.UNLOAD,{currentTime:this.player.currentTime()}))}}])&&Dt(t.prototype,e),a&&Dt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();var Ct="video/mp4",Ut="video/webm",Gt="application/x-mpegURL",Rt="application/dash+xml",Lt=Gt,kt=Rt;function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Ot(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=Yt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=Yt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var wt=Ut,Ft=Lt,Mt=kt,Ht=Ot(Ot(Ot(Ot({},Ct,"mp4"),wt,"webm"),Ft,"hls"),Mt,"dash");var Kt={BITMOVIN:"bitmovin",JW:"jw",RADIANT:"radiant",VIDEOJS:"videojs",HLSJS:"hlsjs",SHAKA:"shaka",DASHJS:"dashjs",HTML:"html5",REACTNATIVEVIDEO:"react-native-video"};function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Bt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,jt(i.key),i)}}function jt(t){var e=function(t,e){if("object"!=Vt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=Vt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vt(e)?e:e+""}var Wt=function(){return t=function t(e,a,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventCallback=a,this.playerSoftwareName=r||Kt.HTML,this.stateMachine=i,this.mediaEl=e,this.mediaElEventHandlers=[],this.analyticsBitrate_=-1,this.audioCodec_="",this.videoCodec_="",this.bufferingTimeout_=null,this.isBuffering_=!1,this.isLive_=!1,this.isPaused_=!1,this.previousMediaTime_=null,this.needsReadyEvent_=!0,this.needsFirstPlayIntent_=!0,this.mediaElementSet_=!1,this.playbackReadySet_=!1,e&&this.setMediaElement()},e=[{key:"setMediaElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&this.mediaEl&&(this.unregisterMediaElement(),this.mediaElementSet_=!1),t&&(this.mediaEl=t),!this.mediaEl)throw new Error("No media element owned");if(this.mediaElementSet_)throw new Error("Media element already set (only call this once)");this.mediaElementSet_=!0,this.registerMediaElement(),this.onMaybeReady()}},{key:"getCurrentQualityLevelInfo",value:function(){return null}},{key:"isLive",value:function(){return!1}},{key:"getMIMEType",value:function(){var t,e=this.mediaEl,a="";return e||(a=null),a=e&&e.src?e.src:e&&e.querySelector("source")&&e.querySelector("source").src?e.querySelector("source").src:null,(t=(t=a).toLowerCase()).endsWith(".m3u8")?Gt:t.endsWith(".mp4")||t.endsWith(".m4v")||t.endsWith(".m4a")?Ct:t.endsWith(".webm")?Ut:t.endsWith(".mpd")?Rt:null}},{key:"getStreamType",value:function(){return t=this.getMIMEType(),Ht[t];var t}},{key:"getPlayerVersion",value:function(){return null}},{key:"getStreamURL",value:function(){var t=this.mediaEl;return t?t&&t.src?t.src:t&&t.querySelector("source")&&t.querySelector("source").src?t.querySelector("source").src:null:null}},{key:"resetMedia",value:function(){this.mediaEl=null,this.mediaElEventHandlers=[]}},{key:"registerMediaElement",value:function(){var t=this,e=this.mediaEl;e&&(this.listenToMediaElementEvent("loadedmetadata",(function(){if(1===e.readyState){t.checkQualityLevelAttributes(!0);var a=e.duration,i=e.autoplay,r=e.videoWidth,n=e.videoHeight,s=e.muted,o=e.clientWidth,l=e.clientHeight,c={type:"html5",isLive:t.isLive(),version:t.getPlayerVersion()||"html5",streamType:t.getStreamType(),streamUrl:t.getStreamURL(),duration:a,autoplay:i,currentVideoData:{height:n,width:r,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},videoWindowWidth:parseInt(o),videoWindowHeight:parseInt(l),muted:s};t.needsFirstPlayIntent_||t.eventCallback(ht.METADATA_LOADED,c)}})),this.listenToMediaElementEvent("canplay",(function(){if(!t.playbackReadySet_){t.playbackReadySet_=!0;var a=e.duration,i=e.autoplay,r=e.videoWidth,n=e.videoHeight,s=e.muted,o=e.clientWidth,l=e.clientHeight,c={type:"html5",isLive:t.isLive(),version:t.getPlayerVersion()||"html5",streamType:t.getStreamType(),streamUrl:t.getStreamURL(),duration:a,autoplay:i,playerSoftware:t.playerSoftwareName,videoWindowWidth:parseInt(o),videoWindowHeight:parseInt(l),currentVideoData:{height:n,width:r,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},muted:s};t.eventCallback(ht.SOURCE_LOADED,c)}})),this.listenToMediaElementEvent("play",(function(){var a=e.currentTime,i=e.videoWidth,r=e.videoHeight;t.needsFirstPlayIntent_=!1,t.eventCallback(ht.PLAY,{currentVideoData:{height:r,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a})})),this.listenToMediaElementEvent("pause",(function(){t.onPaused()})),this.listenToMediaElementEvent("playing",(function(){var a=e.currentTime,i=e.videoWidth,r=e.videoHeight;t.isPaused_=!1,t.needsFirstPlayIntent_||t.eventCallback(ht.TIMECHANGED,{currentVideoData:{height:r,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a})})),this.listenToMediaElementEvent("error",(function(){var a=e.currentTime,i=e.error;t.eventCallback(ht.ERROR,{currentTime:a,code:i&&i.code,message:i&&i.message})})),this.listenToMediaElementEvent("volumechange",(function(){var a=e.muted,i=e.currentTime;a?t.eventCallback(ht.MUTE,{currentTime:i}):t.eventCallback(ht.UN_MUTE,{currentTime:i})})),this.listenToMediaElementEvent("seeking",(function(){var a=e.currentTime,i=e.videoWidth,r=e.videoHeight;t.eventCallback(ht.SEEK,{currentVideoData:{height:r,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a,droppedFrames:0})})),this.listenToMediaElementEvent("seeked",(function(){var a=e.currentTime,i=e.videoWidth,r=e.videoHeight;t.bufferingTimeout_&&clearTimeout(t.bufferingTimeout_),t.eventCallback(ht.SEEKED,{currentVideoData:{height:r,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a,droppedFrames:0})})),this.listenToMediaElementEvent("ended",(function(){var a=e.currentTime,i=e.videoWidth,r=e.videoHeight;t.eventCallback(ht.END,{currentVideoData:{height:r,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a})})),this.listenToMediaElementEvent("timeupdate",(function(){var a=e.currentTime,i=e.videoHeight,r=e.videoWidth;t.isBuffering_=!1,t.needsFirstPlayIntent_||(t.isPaused_||t.eventCallback(ht.TIMECHANGED,{currentVideoData:{height:i,width:r,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a}),t.checkQualityLevelAttributes(),t.checkPlayheadProgress(),t.previousMediaTime_=a)})),this.listenToMediaElementEvent("stalled",(function(){})),this.listenToMediaElementEvent("waiting",(function(){t.onBuffering()})))}},{key:"listenToMediaElementEvent",value:function(t,e){if(!this.mediaEl)throw new Error("No media attached");var a=e.bind(this);this.mediaElEventHandlers.push({handler:a,event:t}),this.mediaEl.addEventListener(t,a,!1)}},{key:"onMaybeReady",value:function(){if(this.needsReadyEvent_&&this.mediaEl){this.needsReadyEvent_=!1;var t=!1,e=this.mediaEl,a=e.duration,i=e.autoplay,r=e.videoWidth,n=e.videoHeight,s=e.muted,o=e.preload;this.mediaEl&&this.mediaEl.src?this.mediaEl.src:this.mediaEl&&this.mediaEl.querySelector("source")&&this.mediaEl.querySelector("source").src&&this.mediaEl.querySelector("source").src;var l=this.mediaEl.clientWidth,c=this.mediaEl.clientHeight;"none"!==o&&(t=!0);var u={type:"html5",isLive:this.isLive(),version:this.getPlayerVersion()||"html5",streamType:this.getStreamType(),streamUrl:this.getStreamURL(),duration:a,autoplay:i,preload:t,playerSoftware:this.playerSoftwareName,currentVideoData:{height:n,width:r,bitrate:this.analyticsBitrate_,audioCodec:this.audioCodec_,videoCodec:this.videoCodec_},videoWindowWidth:parseInt(l),videoWindowHeight:parseInt(c),muted:s};this.stateMachine.updateMetadata(u),this.eventCallback(ht.READY,u)}}},{key:"unregisterMediaElement",value:function(){var t=this;if(!this.mediaEl)throw new Error("No media attached");this.mediaElEventHandlers.forEach((function(e){t.mediaEl.removeEventListener(e.event,e.handler,!1)})),this.resetMedia()}},{key:"onBuffering",value:function(){var t=this.mediaEl.currentTime;this.isBuffering_||this.isPaused_||(this.eventCallback(ht.START_BUFFERING,{currentTime:t}),this.isBuffering_=!0)}},{key:"onPaused",value:function(){if(!this.isPaused_){var t=this.mediaEl,e=t.currentTime,a=t.videoHeight,i=t.videoWidth;this.eventCallback(ht.PAUSE,{currentVideoData:{height:a,width:i,bitrate:this.analyticsBitrate_,audioCodec:this.audioCodec_,videoCodec:this.videoCodec_},currentTime:e}),this.isPaused_=!0}}},{key:"checkPlayheadProgress",value:function(){var t=this,e=this.mediaEl;e.paused&&this.onPaused(),this.bufferingTimeout_&&clearTimeout(this.bufferingTimeout_),this.bufferingTimeout_=setTimeout((function(){e.paused||e.ended&&!t.isBuffering_||e.currentTime-t.previousMediaTime_<1e3&&t.onBuffering()}),1e3)}},{key:"checkQualityLevelAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.mediaEl,a=this.getCurrentQualityLevelInfo();if(a){var i=a.bitrate,r=a.width,n=a.height,s=a.videoCodec,o=a.audioCodec,l=this.isLive();if(l!==this.isLive_&&(this.isLive_=l,t||this.stateMachine.updateMetadata({isLive:l})),this.audioCodec_=o,this.videoCodec_=s,this.analyticsBitrate_!==i){var c={width:r,height:n,bitrate:i,videoCodec:s,audioCodec:o,currentTime:e.currentTime};t||this.eventCallback(ht.VIDEO_CHANGE,c),this.analyticsBitrate_=i}}}}],e&&Bt(t.prototype,e),a&&Bt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Qt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,qt(i.key),i)}}function qt(t){var e=function(t,e){if("object"!=xt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=xt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xt(e)?e:e+""}function Jt(t,e,a){return e=Xt(e),function(t,e){if(e&&("object"==xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$t()?Reflect.construct(e,a||[],Xt(t).constructor):e.apply(t,a))}function $t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($t=function(){return!!t})()}function Xt(t){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xt(t)}function zt(t,e){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zt(t,e)}var Zt=function(t){function e(t,a,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Jt(this,e,[null,a,i,Kt.HLSJS])).hls=t,r.playerSoftwareName=Kt.HLSJS,r.resetMedia(),r.registerHlsEvents(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zt(t,e)}(e,t),a=e,(i=[{key:"getCurrentQualityLevelInfo",value:function(){var t=this.hls,e=t.levels[t.currentLevel];if(e){var a=e.attrs,i=a.BANDWIDTH?parseInt(a.BANDWIDTH,10):0,r=a.RESOLUTION&&a.RESOLUTION.width?parseInt(a.RESOLUTION.width,10):0,n=a.RESOLUTION&&a.RESOLUTION.height?parseInt(a.RESOLUTION.height,10):0,s=null,o=null;return a.CODECS&&(s=a.CODECS.split(",").length>1?a.CODECS.split(",")[1]:"",o=a.CODECS.split(",").length>1?a.CODECS.split(",")[0]:""),{bitrate:i,width:r,height:n,audioCodec:s,videoCodec:o}}}},{key:"isLive",value:function(){var t=this.hls;if(t.currentLevel<0)return!1;var e=t.levels[t.currentLevel];return!!e&&e.details.live}},{key:"getPlayerVersion",value:function(){return Hls.version}},{key:"getMIMEType",value:function(){return Lt}},{key:"getStreamURL",value:function(){return this.hls.url}},{key:"registerHlsEvents",value:function(){var t=this,e=this.hls;if(!Hls)throw new Error("Hls.js is not defined installed (must be loaded before analytics module)");e.on(Hls.Events.MEDIA_ATTACHING,this.onMediaAttaching.bind(this)),e.on(Hls.Events.MEDIA_DETACHING,this.onMediaDetaching.bind(this)),e.on(Hls.Events.MANIFEST_LOADING,this.onManifestLoading.bind(this)),e.on(Hls.Events.ERROR,(function(e,a){t.onError(a)})),e.media&&this.onMediaAttaching(),e.url&&this.onManifestLoading()}},{key:"onMediaAttaching",value:function(){this.mediaEl||(this.mediaEl=this.hls.media,this.registerMediaElement(),this.onMaybeReady())}},{key:"onMediaDetaching",value:function(){this.unregisterMediaElement()}},{key:"onManifestLoading",value:function(){this.onMaybeReady()}},{key:"onError",value:function(t){var e,a,i,r,n,s,o,l,c,u=this.mediaEl.currentTime;t.hasOwnProperty("fatal")&&t.fatal&&t.hasOwnProperty("details")&&"internalException"===t.details&&console.error(t),this.eventCallback(ht.ERROR,{currentTime:u,code:null==t?void 0:t.type,message:JSON.stringify({details:null==t?void 0:t.details,fatal:null==t?void 0:t.fatal,type:null==t?void 0:t.type,fragment_url:null==t?void 0:t.url,error:{message:null==t||null===(e=t.error)||void 0===e?void 0:e.message,stack:null==t||null===(a=t.error)||void 0===a?void 0:a.stack},extra:{networkDetails:{status:null==t||null===(i=t.networkDetails)||void 0===i?void 0:i.status,statusText:null==t||null===(r=t.networkDetails)||void 0===r?void 0:r.statusText,url:null==t||null===(n=t.networkDetails)||void 0===n?void 0:n.url,responseHeaders:null==t||null===(s=t.networkDetails)||void 0===s?void 0:s.responseHeaders,responseText:null==t||null===(o=t.networkDetails)||void 0===o?void 0:o.responseText,responseURL:null==t||null===(l=t.networkDetails)||void 0===l?void 0:l.responseURL,data:null==t||null===(c=t.networkDetails)||void 0===c?void 0:c.data}}})})}}])&&Qt(a.prototype,i),r&&Qt(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(Wt);function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ae(i.key),i)}}function ae(t){var e=function(t,e){if("object"!=te(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=te(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==te(e)?e:e+""}function ie(t,e,a){return e=ne(e),function(t,e){if(e&&("object"==te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,re()?Reflect.construct(e,a||[],ne(t).constructor):e.apply(t,a))}function re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(re=function(){return!!t})()}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(t)}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}var oe=function(t){function e(t,a,i,r){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=ie(this,e,[r,a,i,Kt.SHAKA]),!shaka)throw new Error("`shaka` lib is not installed (must be loaded before analytics module)");return n.shakaPlayer=t,n.playerSoftwareName=Kt.SHAKA,n.registerShakaEvents(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(e,t),a=e,(i=[{key:"getPlayerVersion",value:function(){return shaka.Player.version}},{key:"isLive",value:function(){return!!this.shakaPlayer&&this.shakaPlayer.isLive()}},{key:"getMIMEType",value:function(){return kt}},{key:"getStreamURL",value:function(){return this.shakaPlayer?this.shakaPlayer.getAssetUri():null}},{key:"registerShakaEvents",value:function(){var t=this,e=this.shakaPlayer;if(!e)throw new Error("Shaka player object is not defined");e.addEventListener("error",(function(e){t.onGumletShakaError(e,t.eventCallback,t.mediaEl)}))}},{key:"onGumletShakaError",value:function(t,e,a){var i=0;if(a&&(i=this.mediaEl.currentTime),t.detail){var r=t.detail,n=[];t.detail.data&&t.detail.data.forEach((function(t){n.push(t)})),e(ht.ERROR,{currentTime:i,code:r.code,message:JSON.stringify({category:null==r?void 0:r.v,code:null==r?void 0:r.code,severity:null==r?void 0:r.severity,handled:null==r?void 0:r.handled,timestamp:null==t?void 0:t.timestamp,extra_data:n})})}else eventCallback(ht.ERROR,{currentTime:i,code:"not_set_by_shaka",message:"{}"})}},{key:"getCurrentQualityLevelInfo",value:function(){var t=this.shakaPlayer.getVariantTracks().filter((function(t){return t.active})).filter((function(t){return t.videoCodec||void 0!==t.videoId}))[0];return t?{bitrate:t.videoBandwidth||t.bandwidth,width:t.width,height:t.height,videoCodec:t.videoCodec,audioCodec:t.audioCodec}:null}}])&&ee(a.prototype,i),r&&ee(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(Wt);function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function ce(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ue(i.key),i)}}function ue(t){var e=function(t,e){if("object"!=le(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=le(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==le(e)?e:e+""}function me(t,e,a){return e=he(e),function(t,e){if(e&&("object"==le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ee()?Reflect.construct(e,a||[],he(t).constructor):e.apply(t,a))}function Ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ee=function(){return!!t})()}function he(t){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},he(t)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}var de=function(t){function e(t,a,i){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=me(this,e,[null,a,i,Kt.DASHJS]);var n=null,s=!1;r.playerSoftwareName=Kt.DASHJS;try{n=t.getVideoElement()}catch(t){}return n?r._initialize(t,n):t.on(dashjs.MediaPlayer.events.CAN_PLAY,(function(){if(!s){n=t.getVideoElement(),s=!0,r._initialize(t,n);var e=n,a=e.duration,i=e.autoplay,o=e.videoWidth,l=e.videoHeight,c=e.muted,u=n.clientWidth,m=n.clientHeight,E={type:"html5",isLive:r.isLive(),version:r.getPlayerVersion()||"html5",streamType:r.getStreamType(),streamUrl:r.getStreamURL(),duration:a,autoplay:i,playerSoftware:r.playerSoftwareName,videoWindowWidth:parseInt(u),videoWindowHeight:parseInt(m),currentVideoData:{height:l,width:o,bitrate:r.analyticsBitrate_,audioCodec:r.audioCodec_,videoCodec:r.videoCodec_},muted:c};r.eventCallback(ht.SOURCE_LOADED,E)}}),r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(e,t),a=e,(i=[{key:"_initialize",value:function(t,e){this.mediaPlayer=t,this.setMediaElement(e)}},{key:"getPlayerVersion",value:function(){return this.mediaPlayer.getVersion()}},{key:"isLive",value:function(){return!1}},{key:"getMIMEType",value:function(){return kt}},{key:"getStreamURL",value:function(){return this.mediaPlayer?this.mediaPlayer.getSource():null}},{key:"getCurrentQualityLevelInfo",value:function(){if(this.mediaPlayer){var t=this.mediaPlayer.getBitrateInfoListFor("video")[this.mediaPlayer.getQualityFor("video")],e=this.mediaPlayer.getCurrentTrackFor("video"),a=this.mediaPlayer.getCurrentTrackFor("audio"),i=t.width,r=t.height,n=t.bitrate,s=null,o=null;return e&&(o=e.codec.split('"').length>0?e.codec.split('"')[1]:e.codec),a&&(s=a.codec.split('"').length>0?a.codec.split('"')[1]:a.codec),{width:i,height:r,bitrate:n,audioCodec:s,videoCodec:o}}return null}}])&&ce(a.prototype,i),r&&ce(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,r}(Wt);function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function pe(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ye(i.key),i)}}function ye(t){var e=function(t,e){if("object"!=fe(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=fe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fe(e)?e:e+""}const Ae=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},a=[{key:"getAdapter",value:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Et.isBitmovinVersionPre7(t)?new pt(t,e):Et.isBitmovinVersion7Plus(t)?new _t(t,e):Et.isVideoJs(t)?new Pt(t,e,a):Et.isHlsjs(t)?new Zt(t,e,a):Et.isShaka(t)?new oe(t,e,a,i):Et.isDashjs(t)?new de(t,e,a):new Wt(t,e,a)}}],(e=null)&&pe(t.prototype,e),a&&pe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();var ve=a(595),_e=a.n(ve);function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function Ne(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ge(i.key),i)}}function Te(t,e,a){return(e=ge(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ge(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=be(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==be(e)?e:e+""}var De=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateMachineCallbacks=e,this.customData={previousRecordTime:0,playbackWatchTime:0},this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",END:"END",ERROR:"ERROR",AD:"AD",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE"},this.createStateMachine()}return e=t,i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],(a=[{key:"createStateMachine",value:function(){var e=this,a=[ht.PLAY,ht.PAUSE,ht.SEEK,ht.SEEKED,ht.PLAYBACK_PLAYING,ht.PLAYBACK_FINISHED,ht.READY,ht.SCREEN_RESIZE,ht.END,ht.ERROR,ht.UN_MUTE,ht.MUTE];this.stateMachine=_e().create({initial:this.States.SETUP,error:function(t,e,a,i,r,n,s){nt.error(n)},events:[{name:ht.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ht.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ht.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ht.END_BUFFERING,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ht.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ht.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ht.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ht.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ht.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.PLAY,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ht.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PLAYING,to:this.States.END},{name:ht.END,from:this.States.PAUSE,to:this.States.END},{name:ht.SEEK,from:this.States.END,to:this.States.END},{name:ht.SEEKED,from:this.States.END,to:this.States.END},{name:ht.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ht.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.END,from:this.States.END,to:this.States.END},{name:ht.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ht.ERROR,from:[this.States.SETUP,this.States.STARTUP,this.States.READY,this.States.PLAYING,this.States.REBUFFERING,this.States.PAUSE,this.States.QUALITYCHANGE,this.States.PAUSED_SEEKING,this.States.PLAY_SEEKING,this.States.END_PLAY_SEEKING,this.States.QUALITYCHANGE_PAUSE,"FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE",this.States.END,this.States.ERROR],to:this.States.ERROR},{name:ht.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ht.UNLOAD,from:[this.States.PLAYING,this.States.PAUSE],to:this.States.END},{name:ht.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ht.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ht.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ht.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ht.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ht.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE}],callbacks:{onpause:function(t,a,i,r){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a===e.States.PLAYING&&(e.pausedTimestamp=r)},onbeforeevent:function(i,r,n,s,o){return e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a.includes(i)&&(i===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=o.currentTime),i===ht.SEEK&&r===e.States.PAUSE&&s-e.pausedTimestamp<t.PAUSE_SEEK_DELAY?(e.stateMachine.PLAY_SEEK(s),!1):(i===ht.SEEK&&clearTimeout(e.seekedTimeout),i===ht.SEEKED&&r===e.States.PAUSED_SEEKING?(e.seekedTimestamp=s,e.seekedTimeout=setTimeout((function(){e.stateMachine.pause(s,o)}),t.SEEKED_PAUSE_DELAY),!1):void 0)},onafterevent:function(i,r,n,s,o){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a.includes(i)&&(i===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=o.currentTime),nt.log(t.pad(s,20)+"EVENT: "+t.pad(i,20)+" from "+t.pad(r,14)+"-> "+t.pad(n,14)),n===e.States.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(s),n===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(s),n!==e.States.MUTING_READY&&n!==e.States.MUTING_PLAY&&n!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(s)},onenterstate:function(t,i,r,n,s){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=s.currentTime),e.onEnterStateTimestamp=n||(new Date).getTime(),nt.log("Entering State "+r+" with "+t),s&&r!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(s)},onleavestate:function(t,i,r,n,s){if(e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=s.currentTime),n){var o=n-e.onEnterStateTimestamp;nt.log("State "+i+" was "+o+" ms event:"+t),s&&r!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeEndFromEvent(s);var l=i.toLowerCase();if(i===e.States.END_PLAY_SEEKING||i===e.States.PAUSED_SEEKING){var c=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks[l](c,l,s),nt.log("Seek was "+c+"ms")}else if(t===ht.UNLOAD&&i===e.States.PLAYING)e.stateMachineCallbacks.playingAndBye(o,l,s);else if(i===e.States.PAUSE&&r!==e.States.PAUSED_SEEKING)e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.stateMachineCallbacks.pause(o,l,s),e.stateMachineCallbacks.heartbeat(n,l,s);else{var u=e.stateMachineCallbacks[l];"function"==typeof u?u(o,l,s):nt.error("Could not find callback function for "+l)}s&&r!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(s),t===ht.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(s):t===ht.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(s):t===ht.MUTE?(nt.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===ht.UN_MUTE&&(nt.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,i,r,n){e.customData.previousRecordTime=n.currentTime,e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),e.seekTimestamp=r},onseeked:function(t,a,i,r,n){e.customData.previousRecordTime=n.currentTime,e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),e.seekedTimestamp=r},ontimechanged:function(t,a,i,r,n){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime);var s=n.currentTime-e.customData.previousRecordTime;s>0&&s<5&&(e.customData.playbackWatchTime+=Math.round(1e3*(n.currentTime-e.customData.previousRecordTime)),e.customData.previousRecordTime=n.currentTime);var o=r-e.onEnterStateTimestamp;o>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(o,a.toLowerCase(),n),e.onEnterStateTimestamp=r,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(t,a,i,r,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}}])&&Ne(e.prototype,a),i&&Ne(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a,i}();function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Pe(t){return function(t){if(Array.isArray(t))return Ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ce(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ce(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=Array(e);a<e;a++)i[a]=t[a];return i}function Ue(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Re(i.key),i)}}function Ge(t,e,a){return(e=Re(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Re(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=Ie(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ie(e)?e:e+""}Te(De,"PAUSE_SEEK_DELAY",60),Te(De,"SEEKED_PAUSE_DELAY",120);var Le=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateMachineCallbacks=e,this.customData={previousRecordTime:0,playbackWatchTime:0},this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.seekedFrom=0,this.onEnterStateTimestamp=0,this.lastPlayHeadDuration=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",AD:"AD",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING",SOURCE_CHANGING:"SOURCE_CHANGING"},this.createStateMachine(a)}return e=t,a=[{key:"getAllStates",value:function(){var t=this;return[].concat(Pe(Object.keys(this.States).map((function(e){return t.States[e]}))),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[ht.PLAY,ht.PAUSE,ht.SEEK,ht.SEEKED,ht.PLAYBACK_PLAYING,ht.PLAYBACK_FINISHED,ht.READY,ht.SCREEN_RESIZE,ht.END,ht.ERROR,ht.UN_MUTE,ht.MUTE];this.stateMachine=_e().create({initial:this.States.SETUP,error:function(t,e,a,i,r,n){nt.error("Error in statemachine: "+n)},events:[{name:ht.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ht.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ht.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ht.END_BUFFERING,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ht.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ht.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ht.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ht.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ht.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.PLAY,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ht.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PLAYING,to:this.States.END},{name:ht.END,from:this.States.PAUSE,to:this.States.END},{name:ht.SEEK,from:this.States.END,to:this.States.END},{name:ht.SEEKED,from:this.States.END,to:this.States.END},{name:ht.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ht.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.END,from:this.States.END,to:this.States.END},{name:ht.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ht.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:ht.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ht.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:ht.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ht.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ht.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ht.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ht.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ht.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:ht.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:ht.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:ht.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:ht.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:ht.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:ht.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:ht.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:ht.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:ht.SEEK,from:this.States.READY,to:this.States.READY},{name:ht.SEEKED,from:this.States.READY,to:this.States.READY},{name:ht.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.SOURCE_UNLOADED,from:this.getAllStates(),to:this.States.SOURCE_CHANGING},{name:ht.READY,from:this.States.SOURCE_CHANGING,to:this.States.READY},{name:ht.SOURCE_LOADED,from:this.States.SETUP,to:this.States.SETUP},{name:ht.SOURCE_LOADED,from:this.States.READY,to:this.States.READY},{name:ht.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onpause:function(t,a,i,r){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a===e.States.PLAYING&&(e.pausedTimestamp=r)},onbeforeevent:function(a,r,n,s,o){return e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(a)&&(a===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=o.currentTime),a===ht.SEEK&&r===e.States.PAUSE&&(e.seekedFrom=e.lastPlayHeadDuration,e.seekTimestamp=s,s-e.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(e.stateMachine.PLAY_SEEK(s),!1):(a===ht.SEEK&&clearTimeout(e.seekedTimeout),a!==ht.SOURCE_LOADED?a===ht.SEEKED&&r===e.States.PAUSED_SEEKING?(e.seekedTimestamp=s,e.seekedTimeout=setTimeout((function(){e.stateMachine.pause(s,o)}),t.SEEKED_PAUSE_DELAY),!1):(r!==e.States.REBUFFERING||n!==e.States.QUALITYCHANGE_REBUFFERING)&&void(o&&(e.lastPlayHeadDuration=1e3*o.currentTime)):void e.stateMachineCallbacks.loaded(s,e.States.READY,o))},onafterevent:function(t,a,r,n,s){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=s.currentTime),r===e.States.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(n),r===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(n),r===e.States.QUALITYCHANGE_REBUFFERING&&e.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(n),r!==e.States.MUTING_READY&&r!==e.States.MUTING_PLAY&&r!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(n)},onenterstate:function(t,r,n,s,o){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=o.currentTime),n===e.States.SETUP?e.stateMachineCallbacks.setup(s,e.States.SETUP,o,a):n===e.States.READY?(o.playerSoftware="Bitmovin",e.stateMachineCallbacks.ready(s,e.States.READY,o)):"play"===t&&n===e.States.STARTUP?e.stateMachineCallbacks.first_play(s,e.States.PLAY,o):"play"===t&&r===e.States.PAUSE?(e.stateMachineCallbacks.play(s,e.States.PLAY,o),e.stateMachineCallbacks.playing(s,e.States.PLAYING,o),e.stateMachineCallbacks.heartbeat(s,e.States.PLAY,o)):"timechanged"===t&&r===e.States.STARTUP&&n===e.States.PLAYING?(e.stateMachineCallbacks.playing(s,e.States.PLAYING,o),e.stateMachineCallbacks.playback_started(o)):n===e.States.PAUSE&&r===e.States.PLAYING?(e.stateMachineCallbacks.pause(s,e.States.PAUSE,o),e.stateMachineCallbacks.heartbeat(s,e.States.PAUSE,o)):n===e.States.END?(e.stateMachineCallbacks.end(s,e.States.END,o),e.stateMachineCallbacks.heartbeat(s,e.States.END,o)):n===e.States.END?e.stateMachineCallbacks.mute(s,o):t===ht.START_BUFFERING?e.stateMachineCallbacks.start_rebuffer(s,e.States.REBUFFERING,o):t===ht.END_BUFFERING&&e.stateMachineCallbacks.end_rebuffer(s,e.States.REBUFFERING,o),"none"===r&&a.starttime?e.onEnterStateTimestamp=a.starttime:e.onEnterStateTimestamp=s||(new Date).getTime(),o&&n!==e.States.PAUSED_SEEKING&&n!==e.States.PLAY_SEEKING&&n!==e.States.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(o),"PLAY_SEEK"===t&&n===e.States.PLAY_SEEKING&&n!==e.States.PLAY_SEEKING&&n!==e.States.END_PLAY_SEEKING&&(e.seekTimestamp=e.onEnterStateTimestamp)},onleavestate:function(t,a,r,n,s){if(e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),n){i.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=s.currentTime);var o=n-e.onEnterStateTimestamp;if(s&&r!==e.States.PAUSED_SEEKING&&r!==e.States.PLAY_SEEKING&&r!==e.States.END_PLAY_SEEKING&&(nt.log("Setting video time end to "+s.currentTime+", going to "+r),e.stateMachineCallbacks.setVideoTimeEndFromEvent(s)),"PLAY_SEEK"===t&&a===e.States.PAUSE)return!0;var l=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var c=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks.playback_seeked(e.seekedFrom,1e3*s.currentTime,c,r),e.stateMachineCallbacks.heartbeat(n,e.States.PLAY,s),nt.log("Seek was "+c+"ms")}else t===ht.UNLOAD&&a===e.States.PLAYING?e.stateMachineCallbacks.playingAndBye(o,l,s):a===e.States.PAUSE&&r!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(t);t===ht.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(s):t===ht.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(s):t===ht.MUTE?(nt.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===ht.UN_MUTE&&(nt.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,i,r,n){e.customData.previousRecordTime=n.currentTime,e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),e.seekTimestamp=r},onseeked:function(t,a,i,r,n){e.customData.previousRecordTime=n.currentTime,e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),e.seekedTimestamp=r},ontimechanged:function(t,a,i,r,n){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime);var s=n.currentTime-e.customData.previousRecordTime;s>0&&s<5&&(e.customData.playbackWatchTime+=Math.round(1e3*(n.currentTime-e.customData.previousRecordTime)),e.customData.previousRecordTime=n.currentTime);var o=r-e.onEnterStateTimestamp;o>{HEARTBEAT_THRESHOLD:S}&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(o,a.toLowerCase(),n),e.onEnterStateTimestamp=r,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(t,a,i,r,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}}],i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],a&&Ue(e.prototype,a),i&&Ue(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a,i}();function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Ye(t){return function(t){if(Array.isArray(t))return Oe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Oe(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Oe(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=Array(e);a<e;a++)i[a]=t[a];return i}function we(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Me(i.key),i)}}function Fe(t,e,a){return(e=Me(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Me(t){var e=function(t,e){if("object"!=ke(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ke(e)?e:e+""}Ge(Le,"PAUSE_SEEK_DELAY",200),Ge(Le,"SEEKED_PAUSE_DELAY",300);var He=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateMachineCallbacks=e,this.customData={previousRecordTime:0,playbackWatchTime:0},this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.lastPlayHeadDuration=0,this.autoPlay=!1,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING"},this.createStateMachine(a)}return e=t,a=[{key:"getAllStates",value:function(){var t=this;return[].concat(Ye(Object.keys(this.States).map((function(e){return t.States[e]}))),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[ht.PLAY,ht.PAUSE,ht.SEEK,ht.SEEKED,ht.PLAYBACK_PLAYING,ht.PLAYBACK_FINISHED,ht.READY,ht.SCREEN_RESIZE,ht.END,ht.ERROR,ht.UN_MUTE,ht.MUTE];this.stateMachine=_e().create({initial:this.States.SETUP,error:function(t,e,a,i,r,n){nt.error("Error in statemachine: "+n)},events:[{name:ht.TIMECHANGED,from:this.States.SETUP,to:this.States.SETUP},{name:ht.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ht.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ht.PLAY,from:this.States.SETUP,to:this.States.SETUP},{name:ht.TIMECHANGED,from:this.States.READY,to:this.States.STARTUP},{name:ht.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ht.START_BUFFERING,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ht.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ht.SEEK,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.SEEK,from:this.States.PLAYING,to:this.States.PLAY_SEEKING},{name:ht.TIMECHANGED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.TIMECHANGED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ht.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ht.TIMECHANGED,from:this.States.PAUSE,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ht.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ht.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ht.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ht.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ht.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ht.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PLAYING,to:this.States.END},{name:ht.END,from:this.States.PAUSE,to:this.States.END},{name:ht.SEEK,from:this.States.END,to:this.States.END},{name:ht.SEEKED,from:this.States.END,to:this.States.END},{name:ht.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ht.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.END,from:this.States.END,to:this.States.END},{name:ht.SEEKED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ht.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:ht.PAUSE,from:this.States.ERROR,to:this.States.ERROR},{name:ht.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ht.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:ht.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ht.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ht.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ht.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ht.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ht.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:ht.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:ht.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:ht.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:ht.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:ht.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:ht.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:ht.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:ht.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:ht.SEEK,from:this.States.READY,to:this.States.READY},{name:ht.SEEKED,from:this.States.READY,to:this.States.READY},{name:ht.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.SOURCE_LOADED,from:this.getAllStates(),to:this.States.SETUP},{name:ht.SOURCE_LOADED,from:this.States.SETUP,to:this.States.SETUP},{name:ht.SOURCE_LOADED,from:this.States.READY,to:this.States.READY},{name:ht.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onpause:function(t,a,i,r){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),a===e.States.PLAYING&&(e.pausedTimestamp=r)},onbeforeevent:function(a,r,n,s,o){return e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(a)&&(a===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=o.currentTime),a===ht.PLAY&&r===e.States.SETUP&&n===e.States.SETUP&&(e.autoPlay=!0),a===ht.SEEK&&(r===e.States.PAUSE||r===e.States.PLAYING)&&(e.seekedFrom=e.lastPlayHeadDuration,e.seekTimestamp=s,s-e.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(e.stateMachine.PLAY_SEEK(s),!1):(a===ht.SEEK&&clearTimeout(e.seekedTimeout),a!==ht.SOURCE_LOADED?a===ht.SEEKED&&r===e.States.PAUSED_SEEKING?(e.seekedTimestamp=s,e.seekedTimeout=setTimeout((function(){e.stateMachine.pause(s,o)}),t.SEEKED_PAUSE_DELAY),!1):(r!==e.States.REBUFFERING||n!==e.States.QUALITYCHANGE_REBUFFERING)&&void(o&&(e.lastPlayHeadDuration=1e3*o.currentTime)):void e.stateMachineCallbacks.loaded(s,e.States.READY,o))},onenterstate:function(t,r,n,s,o){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=o.currentTime),n===e.States.SETUP?e.stateMachineCallbacks.setup(s,e.States.SETUP,o,a):n===e.States.READY?(o.playerSoftware=Kt.VIDEOJS,e.stateMachineCallbacks.ready(s,e.States.READY,o)):"play"===t&&n===e.States.STARTUP?e.stateMachineCallbacks.first_play(s,e.States.PLAY,o):"timechanged"===t&&r===e.States.STARTUP&&n===e.States.PLAYING&&e.autoPlay?(e.stateMachineCallbacks.first_play(s,e.States.PLAY,o),e.stateMachineCallbacks.playing(s,e.States.PLAYING,o),e.stateMachineCallbacks.playback_started(o)):"play"===t&&r===e.States.PAUSE?(e.stateMachineCallbacks.play(s,e.States.PLAY,o),e.stateMachineCallbacks.playing(s,e.States.PLAYING,o),e.stateMachineCallbacks.heartbeat(s,e.States.PLAY,o)):"timechanged"!==t||r!==e.States.STARTUP||n!==e.States.PLAYING||e.autoPlay?n===e.States.PAUSE&&r===e.States.PLAYING?(e.stateMachineCallbacks.pause(s,e.States.PAUSE,o),e.stateMachineCallbacks.heartbeat(s,e.States.PAUSE,o)):n===e.States.END?(e.stateMachineCallbacks.end(s,e.States.END,o),e.stateMachineCallbacks.heartbeat(s,e.States.END,o)):n===e.States.END?e.stateMachineCallbacks.mute(s,o):t===ht.START_BUFFERING?e.stateMachineCallbacks.start_rebuffer(s,e.States.REBUFFERING,o):"timechanged"===t&&r===e.States.REBUFFERING&&n===e.States.PLAYING&&e.stateMachineCallbacks.end_rebuffer(s,e.States.REBUFFERING,o):(e.stateMachineCallbacks.playing(s,e.States.PLAYING,o),e.stateMachineCallbacks.playback_started(o)),"none"===r&&a.starttime?e.onEnterStateTimestamp=a.starttime:e.onEnterStateTimestamp=s||(new Date).getTime(),o&&n!==e.States.PAUSED_SEEKING&&n!==e.States.PLAY_SEEKING&&n!==e.States.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(o),"PLAY_SEEK"===t&&n===e.States.PLAY_SEEKING&&n!==e.States.PLAY_SEEKING&&n!==e.States.END_PLAY_SEEKING&&(e.seekTimestamp=e.onEnterStateTimestamp)},onafterevent:function(t,a,r,n,s){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=s.currentTime),r===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(n),r!==e.States.MUTING_READY&&r!==e.States.MUTING_PLAY&&r!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(n)},onleavestate:function(t,a,r,n,s){if(e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),i.includes(t)&&(t===ht.PLAYBACK_FINISHED&&(e.customData.previousRecordTime=0),e.customData.previousRecordTime=s.currentTime),e.stateMachineCallbacks.resetSessionExpiry(),n){var o=n-e.onEnterStateTimestamp;if(s&&r!==e.States.PAUSED_SEEKING&&r!==e.States.PLAY_SEEKING&&r!==e.States.END_PLAY_SEEKING&&(nt.log("Setting video time end to "+s.currentTime+", going to "+r),e.stateMachineCallbacks.setVideoTimeEndFromEvent(s)),"PLAY_SEEK"===t&&a===e.States.PAUSE)return!0;var l=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var c=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks.playback_seeked(e.seekedFrom,1e3*s.currentTime,c,r),e.stateMachineCallbacks.heartbeat(n,e.States.PLAY,s),nt.log("Seek was "+c+"ms")}else t===ht.UNLOAD&&a===e.States.PLAYING?e.stateMachineCallbacks.playingAndBye(o,l,s):a===e.States.PAUSE&&r!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(t);t===ht.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(s):t===ht.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(s):t===ht.MUTE?(nt.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===ht.UN_MUTE&&(nt.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,i,r){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),e.seekTimestamp=r},onseeked:function(t,a,i,r){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime),e.seekedTimestamp=r},ontimechanged:function(t,a,i,r,n){e.stateMachineCallbacks.playbackWatchTime(e.customData.playbackWatchTime);var s=r-e.onEnterStateTimestamp,o=n.currentTime-e.customData.previousRecordTime;o>0&&o<5&&(e.customData.playbackWatchTime+=Math.round(1e3*(n.currentTime-e.customData.previousRecordTime)),e.customData.previousRecordTime=n.currentTime),s>S&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(s,a.toLowerCase(),n),e.onEnterStateTimestamp=r,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n),e.stateMachineCallbacks.resetSessionExpiry())},onplayerError:function(t,a,i,r,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}},{key:"updateMetadata",value:function(t){this.stateMachineCallbacks.updateSample(t)}}],i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],a&&we(e.prototype,a),i&&we(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a,i}();function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Ve(t){return function(t){if(Array.isArray(t))return Be(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Be(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Be(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=Array(e);a<e;a++)i[a]=t[a];return i}function je(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,We(i.key),i)}}function We(t){var e=function(t,e){if("object"!=Ke(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=Ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ke(e)?e:e+""}Fe(He,"PAUSE_SEEK_DELAY",200),Fe(He,"SEEKED_PAUSE_DELAY",300);var xe=function(){return t=function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateMachineCallbacks=e,this.customData={previousRecordTime:0,playbackWatchTime:0},this.pausedTimestamp=null,this.onEnterStateTimestamp=0,this.seekStartedAt=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedFrom=0,this.lastPlayHeadDuration=0,this.playTimeStamp=null,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING"},this.createStateMachine(a)},e=[{key:"getAllStates",value:function(){var t=this;return[].concat(Ve(Object.keys(this.States).map((function(e){return t.States[e]}))),["FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[ht.PLAY,ht.PAUSE,ht.SEEK,ht.SEEKED,ht.PLAYBACK_PLAYING,ht.PLAYBACK_FINISHED,ht.READY,ht.SCREEN_RESIZE,ht.END,ht.ERROR,ht.UN_MUTE,ht.MUTE];this.stateMachine=_e().create({initial:this.States.SETUP,error:function(t,e,a,i,r,n){nt.error("Error in statemachine: "+n)},events:[{name:ht.TIMECHANGED,from:this.States.SETUP,to:this.States.SETUP},{name:ht.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ht.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ht.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.PAUSE,to:this.States.PAUSE},{name:ht.SEEKED,from:this.States.PAUSE,to:this.States.PAUSE},{name:ht.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ht.START_BUFFERING,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ht.PLAY,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ht.SEEK,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ht.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ht.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.PAUSE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ht.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ht.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ht.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ht.TIMECHANGED,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ht.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ht.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ht.END,from:this.States.PLAYING,to:this.States.END},{name:ht.END,from:this.States.PAUSE,to:this.States.END},{name:ht.SEEK,from:this.States.END,to:this.States.END},{name:ht.SEEKED,from:this.States.END,to:this.States.END},{name:ht.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ht.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ht.END,from:this.States.END,to:this.States.END},{name:ht.SEEKED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ht.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:ht.PAUSE,from:this.States.ERROR,to:this.States.ERROR},{name:ht.PLAY,from:this.States.ERROR,to:this.States.PLAYING},{name:ht.TIMECHANGED,from:this.States.ERROR,to:this.States.PLAYING},{name:ht.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:ht.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ht.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ht.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ht.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ht.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ht.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ht.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:ht.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:ht.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:ht.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:ht.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:ht.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:ht.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:ht.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:ht.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:ht.SEEK,from:this.States.READY,to:this.States.READY},{name:ht.SEEKED,from:this.States.READY,to:this.States.READY},{name:ht.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.SOURCE_LOADED,from:this.States.SETUP,to:this.States.SETUP},{name:ht.SOURCE_LOADED,from:this.States.READY,to:this.States.READY},{name:ht.SOURCE_LOADED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ht.SOURCE_LOADED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ht.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ht.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onbeforeevent:function(e,i,r,n,s){if(t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime),a.includes(e)&&(e===ht.PLAYBACK_FINISHED&&(t.customData.previousRecordTime=0),t.customData.previousRecordTime=s.currentTime),e===ht.SEEK&&i===t.States.PAUSE&&(t.seekedFrom=t.lastPlayHeadDuration),e!==ht.SOURCE_LOADED)s&&(t.lastPlayHeadDuration=1e3*s.currentTime);else{var o=null;i===t.States.PLAYING&&(o=(new Date).getTime()-t.playTimeStamp.getTime()),t.stateMachineCallbacks.loaded(n,t.States.READY,s,o)}},onenterstate:function(i,r,n,s,o){t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime),a.includes(i)&&(i===ht.PLAYBACK_FINISHED&&(t.customData.previousRecordTime=0),t.customData.previousRecordTime=o.currentTime),n===t.States.SETUP&&"none"===r?t.stateMachineCallbacks.setup(s,t.States.SETUP,o,e):n===t.States.READY&&r===t.States.SETUP?t.stateMachineCallbacks.ready(s,t.States.READY,o):"play"===i&&n===t.States.STARTUP?(t.playTimeStamp=new Date,t.stateMachineCallbacks.first_play(s,t.States.PLAY,o)):"play"===i&&r===t.States.PAUSE?(t.stateMachineCallbacks.play(s,t.States.PLAY,o),t.stateMachineCallbacks.playing(s,t.States.PLAYING,o),t.stateMachineCallbacks.heartbeat(s,t.States.PLAY,o)):"timechanged"===i&&r===t.States.STARTUP&&n===t.States.PLAYING?(t.stateMachineCallbacks.playing(s,t.States.PLAYING,o),t.stateMachineCallbacks.playback_started(o)):"timechanged"===i&&r===t.States.PAUSE&&n===t.States.PLAYING?t.stateMachineCallbacks.playing(s,t.States.PLAYING,o):n===t.States.PAUSE&&r===t.States.PLAYING?(t.stateMachineCallbacks.pause(s,t.States.PAUSE,o),t.stateMachineCallbacks.heartbeat(s,t.States.PAUSE,o)):n===t.States.END?(t.stateMachineCallbacks.end(s,t.States.END,o),t.stateMachineCallbacks.heartbeat(s,t.States.END,o)):i===ht.START_BUFFERING?t.stateMachineCallbacks.start_rebuffer(s,t.States.REBUFFERING,o):"timechanged"===i&&r===t.States.REBUFFERING&&n===t.States.PLAYING&&t.stateMachineCallbacks.end_rebuffer(s,t.States.REBUFFERING,o),"none"===r&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=s||(new Date).getTime(),o&&n!==t.States.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(o)},onafterevent:function(e,i,r,n,s){t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime),a.includes(e)&&(e===ht.PLAYBACK_FINISHED&&(t.customData.previousRecordTime=0),t.customData.previousRecordTime=s.currentTime),r===t.States.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(n),r!==t.States.MUTING_READY&&r!==t.States.MUTING_PLAY&&r!==t.States.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(n)},onleavestate:function(e,i,r,n,s){if(t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime),a.includes(e)&&(e===ht.PLAYBACK_FINISHED&&(t.customData.previousRecordTime=0),t.customData.previousRecordTime=s.currentTime),t.stateMachineCallbacks.resetSessionExpiry(),n){var o=n-t.onEnterStateTimestamp;s&&r!==t.States.PAUSED_SEEKING&&(nt.log("Setting video time end to "+s.currentTime+", going to "+r),t.stateMachineCallbacks.setVideoTimeEndFromEvent(s));var l=i.toLowerCase();if(i===t.States.PAUSED_SEEKING){var c=n-t.seekStartedAt;t.seekStartedAt=null,t.stateMachineCallbacks.playback_seeked(t.seekedFrom,1e3*s.currentTime,c,r),t.stateMachineCallbacks.heartbeat(n,t.States.PLAY,s),nt.log("Seek was "+c+"ms")}else e===ht.UNLOAD&&i===t.States.PLAYING?t.stateMachineCallbacks.playingAndBye(o,l,s):i===t.States.PAUSE&&r!==t.States.PAUSED_SEEKING&&r!==t.States.PLAYING&&(t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(o,l,s),t.stateMachineCallbacks.heartbeat(n,l,s));e===ht.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(s):e===ht.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(s):e===ht.MUTE?(nt.log("Setting sample to muted"),t.stateMachineCallbacks.mute(n,s)):e===ht.UN_MUTE&&(nt.log("Setting sample to unmuted"),t.stateMachineCallbacks.unMute(n,s))}},onseek:function(e,a,i,r,n){t.customData.previousRecordTime=n.currentTime,t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime),t.seekStartedAt=t.seekStartedAt||r},onseeked:function(e,a,i,r,n){t.customData.previousRecordTime=n.currentTime,t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime),t.seekedTimestamp=r},ontimechanged:function(e,a,i,r,n){t.stateMachineCallbacks.playbackWatchTime(t.customData.playbackWatchTime);var s=r-t.onEnterStateTimestamp,o=n.currentTime-t.customData.previousRecordTime;o>0&&o<5&&(t.customData.playbackWatchTime+=Math.round(1e3*(n.currentTime-t.customData.previousRecordTime)),t.customData.previousRecordTime=n.currentTime),s>S&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),t.stateMachineCallbacks.heartbeat(s,a.toLowerCase(),n),t.onEnterStateTimestamp=r,t.stateMachineCallbacks.setVideoTimeStartFromEvent(n),t.stateMachineCallbacks.resetSessionExpiry())},onplayerError:function(e,a,i,r,n){t.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}},{key:"updateMetadata",value:function(t){this.stateMachineCallbacks.updateSample(t)}}],a=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],e&&je(t.prototype,e),a&&je(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function qe(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Je(i.key),i)}}function Je(t){var e=function(t,e){if("object"!=Qe(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=Qe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qe(e)?e:e+""}const $e=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},a=[{key:"getAnalyticsStateMachine",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Et.isBitmovinVersionPre7(t)?new De(e,a):Et.isBitmovinVersion7Plus(t)?new Le(e,a):Et.isVideoJs(t)?new He(e,a):(Et.isHlsjs(t)||Et.isDashjs(t)||Et.isShaka(t),new xe(e,a))}}],(e=null)&&qe(t.prototype,e),a&&qe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function ze(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ze(i.key),i)}}function Ze(t){var e=function(t,e){if("object"!=Xe(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=Xe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xe(e)?e:e+""}const ta=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"setUp",value:function(){nt.log("setting up cast session"),this.castSession=cast.framework.CastContext.getInstance().getCurrentSession(),this.addMessageListener()}},{key:"addMessageListener",value:function(){var t=this,e=this.castSession.getApplicationMetadata();!e||e.namespaces.indexOf(E)<0?nt.log("No analytics on chrome cast receiver enabled!"):(nt.log("adding message listener"),this.castSession.addMessageListener(E,(function(e,a){nt.log("Received: "+e+" "+a);try{var i=JSON.parse(a);t.handleReceiverMessage(i)}catch(t){nt.error("Message parsing failed "+a)}})))}},{key:"handleReceiverMessage",value:function(t){nt.log(t)}},{key:"sendMessage",value:function(t){var e=this.castSession.getApplicationMetadata();!e||e.namespaces.indexOf(E)<0?nt.log("No analytics on chrome cast receiver enabled!"):(nt.log("Sending message: "+JSON.stringify(t)),this.castSession.sendMessage(E,t))}}])&&ze(t.prototype,e),a&&ze(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();function ea(t){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(t)}function aa(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ia(i.key),i)}}function ia(t){var e=function(t,e){if("object"!=ea(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=ea(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ea(e)?e:e+""}const ra=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"setUp",value:function(){var t=this,e=cast.receiver.CastReceiverManager.getInstance();this.messageBus=e.getCastMessageBus(E,cast.receiver.CastMessageBus.MessageType.JSON),nt.log(this.messageBus),this.messageBus.onMessage=function(e){nt.log("Received message from cast client: "+JSON.stringify(e));var a=e.data;t.handleClientMessage(a)}}},{key:"setCallback",value:function(t){this.callback=t}},{key:"handleClientMessage",value:function(t){this.callback(t)}},{key:"sendMessage",value:function(t){this.messageBus.broadcast(t)}}])&&aa(t.prototype,e),a&&aa(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,a}();const na={SETUP:"event_setup",PLAYER_READY:"event_player_ready",PLAYBACK_READY:"event_playback_ready",PLAYBACK_STARTED:"event_playback_started",PAUSE:"event_pause",PLAY:"event_play",PLAYING:"event_playing",PLAYBACK_UPDATE:"event_playback_update",END:"event_ended",MUTE:"event_muted",UNMUTE:"event_unmute",SEEKED:"event_seeked",START_REBUFFER:"event_rebuffer_start",END_REBUFFER:"event_rebuffer_end",ERROR:"event_error"};var sa=a(503),oa=a.n(sa);function la(t){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(t)}function ca(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ma(i.key),i)}}function ua(t,e,a){return(e=ma(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ma(t){var e=function(t,e){if("object"!=la(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=la(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==la(e)?e:e+""}var Ea=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ua(this,"register",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return a.analyticsStateMachine=new xe(a.stateMachineCallbacks,e),a.analyticsStateMachine;e.starttime?e.starttime=o.convertEpochTime(e.starttime):e.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=$e.getAnalyticsStateMachine(t,a.stateMachineCallbacks,e),a.adapter=Ae.getAdapter(t,a.record,a.analyticsStateMachine,e.mediaElement),a.adapter||nt.error("Could not detect player.")})),ua(this,"registerVideoJSPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime?e.starttime=o.convertEpochTime(e.starttime):e.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=new He(a.stateMachineCallbacks,e),a.adapter=new Pt(t,a.record,a.analyticsStateMachine)})),ua(this,"registerHLSJSPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime?e.starttime=o.convertEpochTime(e.starttime):e.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=new xe(a.stateMachineCallbacks,e),a.adapter=new Zt(t,a.record,a.analyticsStateMachine)})),ua(this,"registerShakaPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime?e.starttime=o.convertEpochTime(e.starttime):e.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=new xe(a.stateMachineCallbacks,e),a.adapter=new oe(t,a.record,a.analyticsStateMachine,e.mediaElement)})),ua(this,"registerHTML5Player",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime?e.starttime=o.convertEpochTime(e.starttime):e.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=new xe(a.stateMachineCallbacks,e),a.adapter=new Wt(t,a.record,a.analyticsStateMachine)})),ua(this,"customEventHandler",(function(t,e){a.customEventData=JSON.stringify(e),a.sendAnalyticsRequestAndClearValues(t,{custom_event_data:a.customEventData})})),ua(this,"customEventHandlerAsync",(function(t,e){return new Promise((function(i,r){a.customEventData=JSON.stringify(e),a.sendAnalyticsRequestAndClearValuesAsync(t,{custom_event_data:a.customEventData}).then((function(t){i(t)})).catch((function(t){r(t)}))}))})),ua(this,"registerDashJSPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime?e.starttime=o.convertEpochTime(e.starttime):e.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=new xe(a.stateMachineCallbacks,e),a.adapter=new de(t,a.record,a.analyticsStateMachine)})),ua(this,"registerReactNativeVideoPlayer",(function(t){return t.starttime?t.starttime=o.convertEpochTime(t.starttime):t.starttime=o.getCurrentTimestamp(),a.analyticsStateMachine=new xe(a.stateMachineCallbacks,t),a.analyticsStateMachine})),ua(this,"getCurrentImpressionId",(function(){return a.sample.impressionId})),ua(this,"record",(function(t,e){e=e||{},a.analyticsStateMachine.callEvent(t,e,o.getCurrentTimestamp())})),ua(this,"setDroppedFrames",(function(t){})),this.config=e,this.analyticsCall=new L,this.sessionCreationCall=new B,this.playerInitCall=new Z,this.castClient=new ta,this.castReceiver=new ra,this.droppedSampleFrames=0,this.licensing="granted",this.startupTime=0,this.pageLoadType=t.PAGE_LOAD_TYPE.FOREGROUND,this.autoplay=void 0,this.isCastClient=!1,this.isCastReceiver=!1,this.isAllowedToSendSamples=!1,this.samplesQueue=[],this.previousState=void 0,this.previousStateTimeStamp=new Date,this.firstPlayTimestamp=0,this.isMuted=!1,this.isFullScreen=void 0,this.videoWidthPixels=void 0,this.videoHeightPixels=void 0,this.upscalePercentage=void 0,this.downscalePercentage=void 0,this.videoBitrate=void 0,this.audioCodec=void 0,this.videoCodec=void 0,this.currentTime=0;try{this.orientation=screen.orientation.type.match(/\w+/)[0],screen.orientation.onchange=function(){this.orientation=screen.orientation.type.match(/\w+/)[0]}}catch(t){this.orientation="undetected"}this.setConfigParameters(),this.init(),this.setupSample(),this.setupStateMachineCallbacks()}return e=t,a=[{key:"init",value:function(){if(this.isCastReceiver||""!=this.config.property_id&&o.validString(this.config.property_id)){nt.setLogging(this.config.debug||!1),this.propertyId=this.config.property_id,"undefined"!=typeof window&&void 0!==window.parent?this.pageURL=window.location!=window.parent.location?document.referrer:document.location.href:this.config.page_url?this.pageURL=this.config.page_url:this.pageURL=null;var t=!1;this.config.test&&(t=!0);var e=null;this.config.sessionID&&(e=this.config.sessionID);var a=!0;this.config.hasOwnProperty("sendSessionRequest")&&(a=this.config.sendSessionRequest);var i=null;this.config.userID&&(i=this.config.userID),this.setUserId(t,i),this.setSessionId(t,e,a),this.setPlayerInstanceId(),this.setPlaybackId()}else console.error("Invalid analytics property_id provided")}},{key:"setConfigParameters",value:function(){arguments.length>0&&void 0!==arguments[0]||this.sample;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config;this.customData1=o.getCustomDataString(t.customData1),this.customData2=o.getCustomDataString(t.customData2),this.customData3=o.getCustomDataString(t.customData3),this.customData4=o.getCustomDataString(t.customData4),this.customData5=o.getCustomDataString(t.customData5),this.customData6=o.getCustomDataString(t.customData6),this.customData7=o.getCustomDataString(t.customData7),this.customData8=o.getCustomDataString(t.customData8),this.customData9=o.getCustomDataString(t.customData9),this.customData10=o.getCustomDataString(t.customData10),this.customPlayerIntegrationVersion=o.getCustomDataString(t.customPlayerIntegrationVersion),this.customPlayerName=o.getCustomDataString(t.customPlayerName),this.customPageType=o.getCustomDataString(t.customPageType),this.customUserId=o.getCustomDataString(t.userId),this.userName=o.getCustomDataString(t.userName),this.userEMail=o.getCustomDataString(t.userEMail),this.userPhone=o.getCustomDataString(t.userPhone),this.userProfileImage=o.getCustomDataString(t.userProfileImage),this.userAddressLine1=o.getCustomDataString(t.userAddressLine1),this.userAddressLine2=o.getCustomDataString(t.userAddressLine2),this.userCity=o.getCustomDataString(t.userCity),this.userState=o.getCustomDataString(t.userState),this.userCountry=o.getCustomDataString(t.userCountry),this.userZipcode=o.getCustomDataString(t.userZipcode),this.customContentType=o.getCustomDataString(t.customContentType),this.customVideoDurationMillis=o.getCustomDataString(t.customVideoDurationMillis),this.customEncodingVariant=o.getCustomDataString(t.customEncodingVariant),this.customVideoLanguage=o.getCustomDataString(t.customVideoLanguage),this.customVideoId=o.getCustomDataString(t.customVideoId),this.customVideoSeries=o.getCustomDataString(t.customVideoSeries),this.customVideoProducer=o.getCustomDataString(t.customVideoProducer),this.customVideoTitle=o.getCustomDataString(t.customVideoTitle),this.customVideoVariantName=o.getCustomDataString(t.customVideoVariantName),this.customVideoVariant=o.getCustomDataString(t.customVideoVariant),this.SDKVersion="1.0.0",this.experimentName=t.experimentName}},{key:"updateCustomUserData",value:function(t){this.customUserId=o.getCustomDataString(t.userId),this.userName=o.getCustomDataString(t.userName),this.userEMail=o.getCustomDataString(t.userEMail),this.userPhone=o.getCustomDataString(t.userPhone),this.userProfileImage=o.getCustomDataString(t.userProfileImage),this.userAddressLine1=o.getCustomDataString(t.userAddressLine1),this.userAddressLine2=o.getCustomDataString(t.userAddressLine2),this.userCity=o.getCustomDataString(t.userCity),this.userState=o.getCustomDataString(t.userState),this.userCountry=o.getCustomDataString(t.userCountry),this.userZipcode=o.getCustomDataString(t.userZipcode)}},{key:"updateCustomVideoData",value:function(t){this.customContentType=o.getCustomDataString(t.customContentType),this.customVideoDurationMillis=o.getCustomDataString(t.customVideoDurationMillis),this.customEncodingVariant=o.getCustomDataString(t.customEncodingVariant),this.customVideoLanguage=o.getCustomDataString(t.customVideoLanguage),this.customVideoId=o.getCustomDataString(t.customVideoId),this.customVideoSeries=o.getCustomDataString(t.customVideoSeries),this.customVideoProducer=o.getCustomDataString(t.customVideoProducer),this.customVideoTitle=o.getCustomDataString(t.customVideoTitle),this.customVideoVariantName=o.getCustomDataString(t.customVideoVariantName),this.customVideoVariant=o.getCustomDataString(t.customVideoVariant)}},{key:"updateCustomData",value:function(t){this.customData1=o.getCustomDataString(t.customData1),this.customData2=o.getCustomDataString(t.customData2),this.customData3=o.getCustomDataString(t.customData3),this.customData4=o.getCustomDataString(t.customData4),this.customData5=o.getCustomDataString(t.customData5),this.customData6=o.getCustomDataString(t.customData6),this.customData7=o.getCustomDataString(t.customData7),this.customData8=o.getCustomDataString(t.customData8),this.customData9=o.getCustomDataString(t.customData9),this.customData10=o.getCustomDataString(t.customData10)}},{key:"updateCustomPlayerData",value:function(t){this.customPlayerIntegrationVersion=o.getCustomDataString(t.customPlayerIntegrationVersion),this.customPlayerName=o.getCustomDataString(t.customPlayerName),this.customPageType=o.getCustomDataString(t.customPageType)}},{key:"setSessionData",value:function(){this.sessionData={session_id:this.sessionId,property_id:this.propertyId,user_id:this.userId,custom_user_id:this.customUserId,custom_data_1:this.customData1,custom_data_2:this.customData2,custom_data_3:this.customData3,custom_data_4:this.customData4,custom_data_5:this.customData5,custom_data_6:this.customData6,custom_data_7:this.customData7,custom_data_8:this.customData8,custom_data_9:this.customData9,custom_data_10:this.customData10,user_name:this.userName,user_email:this.userEMail,user_phone:this.userPhone,user_profile_image:this.userProfileImage,user_address_line1:this.userAddressLine1,user_address_line2:this.userAddressLine2,user_city:this.userCity,user_state:this.userState,user_country:this.userCountry,user_zipcode:this.userZipcode,viewer_client_version:this.SDKVersion,meta_browser:this.meta_browser,meta_device_manufacturer:this.meta_device_manufacturer,meta_operating_system_version:this.meta_operating_system_version,meta_operating_system:this.meta_operating_system,meta_device_name:this.meta_device_name,meta_browser_version:this.meta_browser_version,meta_device_category:this.meta_device_category,meta_device_architecture:this.meta_device_architecture,meta_device_display_width:this.meta_device_display_width,meta_device_display_height:this.meta_device_display_height,meta_device_is_touchscreen:this.meta_device_is_touchscreen,meta_device_display_dpr:this.meta_device_display_dpr,meta_browser_language:this.meta_browser_language},this.config.deviceData?(this.sessionData.meta_device_name=this.config.deviceData.meta_device_name,this.sessionData.meta_device_manufacturer=this.config.deviceData.meta_device_manufacturer,this.sessionData.meta_operating_system_version=this.config.deviceData.meta_operating_system_version,this.sessionData.meta_operating_system=this.config.deviceData.meta_operating_system,this.sessionData.meta_browser=this.config.deviceData.meta_browser,this.sessionData.meta_device_display_dpr=this.config.deviceData.meta_device_display_dpr,this.sessionData.meta_browser_version=this.config.deviceData.meta_browser_version,this.sessionData.meta_device_category=this.config.deviceData.meta_device_category,this.sessionData.meta_device_architecture=this.config.deviceData.meta_device_architecture,this.sessionData.meta_device_display_width=this.config.deviceData.meta_device_display_width,this.sessionData.meta_device_display_height=this.config.deviceData.meta_device_display_height,this.sessionData.meta_device_is_touchscreen=this.config.deviceData.meta_device_is_touchscreen,this.sessionData.meta_browser_language=this.config.deviceData.meta_browser_language):(this.sessionData.meta_device_name=oa().product,this.sessionData.meta_device_manufacturer=oa().manufacturer,this.sessionData.meta_operating_system_version=oa().os.version,this.sessionData.meta_operating_system=oa().os.family,this.sessionData.meta_browser=oa().name,this.sessionData.meta_browser_version=oa().version,this.sessionData.meta_device_category=tt(),this.sessionData.meta_device_architecture=oa().os.architecture,this.sessionData.meta_device_display_dpr=window.devicePixelRatio,this.sessionData.meta_device_display_width=window.screen.width,this.sessionData.meta_device_display_height=window.screen.height,this.sessionData.meta_device_display_dpr=parseInt(window.devicePixelRatio),this.sessionData.meta_browser_language=navigator?navigator.language||navigator.userLanguage:"","ontouchstart"in document.documentElement&&(this.sessionData.meta_device_is_touchscreen="true"))}},{key:"setPlayerData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.playerData={player_instance_id:this.playerInstanceId,property_id:this.propertyId,session_id:this.sessionId,user_id:this.userId,custom_user_id:this.customUserId,custom_data_1:this.customData1,custom_data_2:this.customData2,custom_data_3:this.customData3,custom_data_4:this.customData4,custom_data_5:this.customData5,custom_data_6:this.customData6,custom_data_7:this.customData7,custom_data_8:this.customData8,custom_data_9:this.customData9,custom_data_10:this.customData10,player_integration_version:this.customPlayerIntegrationVersion,meta_page_type:this.customPageType,meta_page_url:this.pageURL},this.config.deviceData&&(this.playerData.player_preload=this.config.playerData.player_preload,this.playerData.player_autoplay=this.config.playerData.player_autoplay,this.playerData.player_software_version=this.config.playerData.player_software_version,this.playerData.player_integration_version=this.config.playerData.player_integration_version,this.playerData.player_name=this.config.playerData.player_name,this.playerData.player_language_code=this.config.playerData.player_language_code,this.playerData.player_software=this.config.playerData.player_software,this.playerData.meta_page_url=this.config.playerData.meta_page_url,this.playerData.meta_page_type=this.config.playerData.meta_page_type,this.playerData.player_height_pixels=this.config.playerData.player_height_pixels,this.playerData.player_width_pixels=this.config.playerData.player_width_pixels),t&&o.validNumber(t.videoWindowHeight)&&(this.playerData.player_height_pixels=t.videoWindowHeight),t&&o.validNumber(t.videoWindowWidth)&&(this.playerData.player_width_pixels=t.videoWindowWidth),t&&o.validBoolean(t.autoplay)&&(this.playerData.player_autoplay=t.autoplay),t&&o.validBoolean(t.preload)&&(this.playerData.player_preload=t.preload),t&&o.validString(t.version)&&(this.playerData.player_software_version=t.version),t&&o.validString(t.audioLanguage)&&(this.playerData.player_language_code=t.audioLanguage),t&&o.validString(t.playerSoftware)&&(this.playerData.player_software=t.playerSoftware)}},{key:"setUserId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)this.userId=e;else if(t)this.userId=o.uuidv4();else{var a=o.getCookie("gumlet_user_id");this.userId=a&&""!==a?a:o.setCookie("gumlet_user_id",43200)}}},{key:"setPlayerInstanceId",value:function(){this.config.getUUID?this.playerInstanceId=this.config.getUUID():this.playerInstanceId=o.uuidv4(),this.setPlayerData()}},{key:"setPlaybackId",value:function(){this.config.getUUID?this.playbackId=this.config.getUUID():this.playbackId=o.uuidv4()}},{key:"setSessionId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)return this.sessionId=e,this.setSessionData(),void(a&&this.sessionCreationCall.sendRequest(this.sessionData,o.noOp));if(t)this.sessionId=o.uuidv4();else{var i=o.getCookie("gumlet_session_id");i&&""!==i?(this.sessionId=i,this.setSessionData()):(this.sessionId=o.setCookie("gumlet_session_id",30),this.setSessionData(),this.sessionCreationCall.sendRequest(this.sessionData,o.noOp))}}},{key:"sendAnalyticsSetupCall",value:function(){this.sendAnalyticsRequestAndClearValues(na.SETUP,{millis_from_previous_event:0}),this.setState(na.SETUP)}},{key:"getMillisFromPreviousState",value:function(){return(new Date).getTime()-this.previousStateTimeStamp.getTime()}},{key:"getPlaybackWatchTime",value:function(){return this.playbackWatchTime}},{key:"setPlaybackWatchTime",value:function(t){this.playbackWatchTime=t}},{key:"setVideoData",value:function(t){t&&o.validNumber(t.duration)&&(this.videoDuration=o.calculateTime(t.duration)),t&&o.validString(t.streamType)&&(this.videoSourceType=t.streamType,"dash"===t.streamType&&o.validString(t.mpdUrl)?(this.videoSourceUrl=t.mpdUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):"hls"===t.streamType&&o.validString(t.m3u8Url)?(this.videoSourceUrl=t.m3u8Url,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):"hls"===t.streamType&&o.validString(t.streamUrl)?(this.videoSourceUrl=t.streamUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):"progressive"===t.streamType&&o.validString(t.progUrl)?(this.videoSourceUrl=t.progUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):t&&t.streamUrl&&(this.videoSourceUrl=t.streamUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname)),t&&t.streamUrl&&(this.videoSourceUrl=t.streamUrl),t&&t.sourceHostName&&(this.videoSourceHostname=t.sourceHostName),t&&t.hasOwnProperty("muted")&&(this.isMuted=t.muted),t&&t.currentVideoData&&o.validNumber(t.currentVideoData.height)&&t.currentVideoData.height>0&&(this.videoHeightPixels=t.currentVideoData.height),t&&t.currentVideoData&&o.validNumber(t.currentVideoData.width)&&t.currentVideoData.width>0&&(this.videoWidthPixels=t.currentVideoData.width),t&&t.currentVideoData&&o.validNumber(t.currentVideoData.bitrate)&&t.currentVideoData.bitrate>-1&&(this.videoBitrate=t.currentVideoData.bitrate/1e6),t&&t.currentVideoData&&o.validString(t.currentVideoData.audioCodec)&&t.currentVideoData.audioCodec.length>0&&(this.audioCodec=t.currentVideoData.audioCodec),t&&t.currentVideoData&&o.validString(t.currentVideoData.videoCodec)&&t.currentVideoData.videoCodec.length>0&&(this.videoCodec=t.currentVideoData.videoCodec);var e=0;if(!(this.videoHeightPixels&&this.playerData.player_height_pixels&&this.sessionData.meta_device_display_dpr))return this.upscalePercentage=void 0,void(this.downscalePercentage=void 0);(e=this.playerData.player_height_pixels*this.sessionData.meta_device_display_dpr/this.videoHeightPixels-1)>0?(this.upscalePercentage=100*e,this.downscalePercentage=0):e<0?(this.upscalePercentage=0,this.downscalePercentage=100*e*-1):(this.upscalePercentage=0,this.downscalePercentage=0);var a=new URL(this.videoSourceUrl);"video.gumlet.io"!==a.hostname||this.customVideoId||(this.customVideoId=a.pathname.split("/")[2])}},{key:"setupStateMachineCallbacks",value:function(){var e=this;this.stateMachineCallbacks={setup:function(t,a,i,r){nt.log("Setup Gumlet analytics "+e.analyticsVersion),e.setDuration(t),e.setVideoData(i);var n=0;r&&r.starttime&&(n=(new Date).getTime()-r.starttime),e.sendAnalyticsRequestAndClearValues(na.SETUP,{millis_from_previous_event:n}),e.setState(na.SETUP)},ready:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(na.PLAYER_READY),e.setState(na.PLAYER_READY),e.setPlayerData(i),e.playerInitCall.sendRequest(e.playerData,o.noOp)},loaded:function(t,a,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i);var n={};null!==r&&(n={millis_from_previous_event:r,previous_event:na.PLAYER_READY}),e.sendAnalyticsRequestAndClearValues(na.PLAYBACK_READY,n),null===r&&e.setState(na.PLAYBACK_READY)},startup:function(t,a){e.setDuration(t)},first_play:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(na.PLAY),e.setState(na.PLAY),e.firstPlayTimestamp=new Date},play:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(na.PLAY),e.setState(na.PLAY)},updateSample:function(t){e.setPlaybackSettingsFromLoadedEvent(t)},playing:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(na.PLAYING),e.setState(na.PLAYING)},playback_started:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i);var r=(new Date).getTime()-e.firstPlayTimestamp.getTime();e.sendAnalyticsRequestAndClearValues(na.PLAYBACK_STARTED,{millis_from_previous_event:r}),e.setState(na.PLAYBACK_STARTED)},playingAndBye:function(t,a,i){e.setDuration(t),e.setDroppedFrames(i),e.sendUnloadRequest()},heartbeat:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(na.PLAYBACK_UPDATE),e.setState(na.PLAYBACK_UPDATE)},playbackWatchTime:function(t){e.setPlaybackWatchTime(t)},qualitychange:function(t,a){e.setDuration(t)},qualitychange_pause:function(t,a){e.setDuration(t)},qualitychange_rebuffering:function(t,a){e.setDuration(t)},videoChange:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackSettingsFromLoadedEvent(t)},audioChange:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t)},pause:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(na.PAUSE),e.setState(na.PAUSE)},start_rebuffer:function(t,a,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),r||e.sendAnalyticsRequestAndClearValues(na.START_REBUFFER),e.setState(na.START_REBUFFER)},end_rebuffer:function(t,a,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),r)return e.getSample(na.END_REBUFFER);e.sendAnalyticsRequestAndClearValues(na.END_REBUFFER),e.setState(na.END_REBUFFER)},playback_seeked:function(t,a,i,r){e.sendAnalyticsRequestAndClearValues(na.SEEKED,{from:t,to:a}),e.setState(na.SEEKED),e.setupSample(),"PAUSE"===r?(e.sendAnalyticsRequestAndClearValues(na.PAUSE,{millis_from_previous_event:i}),e.setState(na.PAUSE)):"PLAYING"===r&&(e.sendAnalyticsRequestAndClearValues(na.PLAYING,{millis_from_previous_event:i}),e.setState(na.PLAYING))},paused_seeking:function(t,a,i){e.setDuration(t)},play_seeking:o.noOp,end_play_seeking:function(t,a,i){e.setDuration(t)},rebuffering:function(t,a,i){e.setDuration(t)},error:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.sendAnalyticsRequestAndClearValues(na.ERROR,{error_code:t&&t.code,error:t&&t.message}),e.setState(na.ERROR),e.setupSample()},end:function(t,a,i){e.setPlaybackId(),e.setDuration(t),e.sendAnalyticsRequestAndClearValues(na.END),e.setState(na.END)},ad:function(t,a,i){e.setDuration(t),e.setDroppedFrames(i)},mute:function(t,a){e.isMuted=!0,e.setPlaybackSettingsFromLoadedEvent(a),e.sendAnalyticsRequestAndClearValues(na.MUTE)},unMute:function(t,a){e.isMuted=!1,e.setPlaybackSettingsFromLoadedEvent(a),e.sendAnalyticsRequestAndClearValues(na.UNMUTE)},muting_ready:o.noOp,muting_play:o.noOp,muting_pause:o.noOp,setVideoTimeEndFromEvent:function(t){},setVideoTimeStartFromEvent:function(t){},startCasting:function(a,i){if(i&&i.resuming)return e.isAllowedToSendSamples=!1,void nt.warning("Player started casting but a session is already casting!");e.isCastClient=!0,e.isAllowedToSendSamples=!1;var r=e.sample,n=r.domain,s=r.path,o=r.language,l=r.userAgent,c=r.userId,u=r.impressionId,m={type:t.CAST_RECEIVER_CONFIG_MESSAGE,data:{config:e.config,userId:c,domain:n,path:s,language:o,userAgent:l,impressionId:u}};e.castClient.setUp(),e.castClient.sendMessage(m)},casting:function(){e.isCastClient=!1,e.samplesQueue=[],e.isAllowedToSendSamples=!0},source_changing:function(){},resetSessionExpiry:function(){e.config.test||e.config.sessionID||(o.setCookie("gumlet_session_id",30,e.sessionId),o.setCookie("gumlet_user_id",43200,e.userId))}}}},{key:"setDuration",value:function(t){}},{key:"setState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t&&(this.previousState=t,this.previousStateTimeStamp=new Date)}},{key:"setPlaybackSettingsFromLoadedEvent",value:function(t){t&&o.validNumber(t.currentTime)&&(this.currentTime=o.calculateTime(t.currentTime)),t&&o.validBoolean(t.isFullScreen)&&(this.isFullScreen=t.isFullScreen),t&&o.validBoolean(t.isCasting)&&(this.isCasting=t.isCasting)}},{key:"setupSample",value:function(){this.sample={property_id:this.propertyId,session_id:this.sessionId,user_id:this.userId,player_instance_id:this.playerInstanceId,playback_id:this.playbackId,from:void 0,to:void 0,playback_time_instant_millis:void 0,bitrate_mbps:this.videoBitrate,error_code:void 0,error:void 0,error_text:void 0,video_cover:void 0,video_cover_reference:void 0,player_remote_played:void 0,video_total_duration_millis:this.videoDuration,video_width_pixels:void 0,video_height_pixels:void 0,video_source_url:void 0,video_source_hostname:void 0,video_source_type:void 0,custom_content_type:this.customContentType,custom_video_duration_millis:this.customVideoDurationMillis,custom_encoding_variant:this.customEncodingVariant,custom_video_language:this.customVideoLanguage,custom_video_id:this.customVideoId,custom_video_series:this.customVideoSeries,custom_video_producer:this.customVideoProducer,custom_video_title:this.customVideoTitle,custom_video_variant_name:this.customVideoVariantName,custom_video_variant:this.customVideoVariant,muted:this.isMuted,casting:void 0,fullscreen:this.isFullScreen,video_downscale_percentage:void 0,video_upscale_percentage:void 0,orientation:void 0,orientation_from:void 0,quality:void 0,quality_from:void 0,previous_event:void 0,millis_from_previous_event:void 0,video_codec:void 0,audio_codec:void 0,custom_data_1:this.customData1,custom_data_2:this.customData2,custom_data_3:this.customData3,custom_data_4:this.customData4,custom_data_5:this.customData5,custom_data_6:this.customData6,custom_data_7:this.customData7,custom_data_8:this.customData8,custom_data_9:this.customData9,custom_data_10:this.customData10,custom_event_data:void 0,playback_watch_time:void 0}}},{key:"getSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.sample;if(a.event=t,this.config.getUUID?a.event_id=this.config.getUUID():a.event_id=o.uuidv4(),a.custom_data_1=this.customData1,a.custom_data_2=this.customData2,a.custom_data_3=this.customData3,a.custom_data_4=this.customData4,a.custom_data_5=this.customData5,a.custom_data_6=this.customData6,a.custom_data_7=this.customData7,a.custom_data_8=this.customData8,a.custom_data_9=this.customData9,a.custom_data_10=this.customData1,a.custom_content_type=this.customContentType,a.custom_video_duration_millis=this.customVideoDurationMillis,a.custom_encoding_variant=this.customEncodingVariant,a.custom_video_language=this.customVideoLanguage,a.custom_video_id=this.customVideoId,a.custom_video_series=this.customVideoSeries,a.custom_video_producer=this.customVideoProducer,a.custom_video_title=this.customVideoTitle,a.custom_video_variant_name=this.customVideoVariantName,a.custom_video_variant=this.customVideoVariant,a.millis_from_previous_event=this.getMillisFromPreviousState(),a.previous_event=this.previousState,a.fullscreen=this.isFullScreen,a.muted=this.isMuted,a.video_width_pixels=this.videoWidthPixels,a.video_height_pixels=this.videoHeightPixels,a.video_total_duration_millis=this.videoDuration,a.bitrate=this.videoBitrate,a.audio_codec=this.audioCodec,a.video_codec=this.videoCodec,a.orientation=this.orientation,a.playback_time_instant_millis=this.currentTime,a.video_source_type=this.videoSourceType,a.video_source_url=this.videoSourceUrl,a.video_upscale_percentage=this.upscalePercentage,a.video_downscale_percentage=this.downscalePercentage,a.video_source_hostname=this.videoSourceHostname,a.custom_event_data=void 0,a.playback_watch_time=this.playbackWatchTime,Object.keys(e).forEach((function(t){a[t]=e[t]})),"undefined"!=typeof window&&void 0!==window.parent&&window.navigator)try{"function"==typeof window.navigator.getBattery&&window.navigator.getBattery().then((function(t){t&&(a.battery_level_percentage=100*t.level,a.battery_charging=t.charging)}))}catch(t){}return a}},{key:"sendAnalyticsRequest",value:function(t,e){var a=this.getSample(t,e);a.playback_time_instant_millis&&a.video_total_duration_millis&&a.playback_time_instant_millis>a.video_total_duration_millis||this.analyticsCall.sendRequest(a,o.noOp)}},{key:"sendAnalyticsRequestAsync",value:function(t,e){var a=this;return new Promise((function(i,r){var n=a.getSample(t,e);n.playback_time_instant_millis&&n.video_total_duration_millis&&n.playback_time_instant_millis>n.video_total_duration_millis?i(406):a.analyticsCall.sendRequestAsync(n).then((function(t){i(t)})).catch((function(t){r(t)}))}))}},{key:"sendAnalyticsRequestAndClearValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return nt.log("event null passed not hitting the injestion API"),False;this.videoDuration&&this.videoDuration>864e5||this.sendAnalyticsRequest(t,e)}},{key:"sendAnalyticsRequestAndClearValuesAsync",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,r){e||(nt.log("event null passed not hitting the injestion API"),r("event null passed not hitting the injestion API")),t.sendAnalyticsRequestAsync(e,a).then((function(t){i(t)})).catch((function(t){r(t)}))}))}},{key:"sendUnloadRequest",value:function(){var t=this;"denied"!==this.licensing&&(void 0===navigator.sendBeacon?this.sendAnalyticsRequestSynchronous():fetch(this.analyticsCall.getAnalyticsServerUrl(),{method:"POST",body:JSON.stringify(this.sample),headers:{"Content-Type":"application/json"}}).then((function(e){e.ok||t.sendAnalyticsRequestSynchronous()})).catch((function(e){t.sendAnalyticsRequestSynchronous()})))}},{key:"sendAnalyticsRequestSynchronous",value:function(){"denied"!==this.licensing&&this.analyticsCall.sendRequestSynchronous(this.sample,o.noOp)}},{key:"clearValues",value:function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.pageLoadType=0}},{key:"getDroppedFrames",value:function(t){if(null!=t&&0!=t){var e=t-this.droppedSampleFrames;return this.droppedSampleFrames=t,e}return 0}}],a&&ca(e.prototype,a),i&&ca(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a,i}();ua(Ea,"PAGE_LOAD_TYPE",{FOREGROUND:1,BACKGROUND:2}),ua(Ea,"LICENSE_CALL_PENDING_TIMEOUT",200),ua(Ea,"PAGE_LOAD_TYPE_TIMEOUT",200),ua(Ea,"CAST_RECEIVER_CONFIG_MESSAGE","CAST_RECEIVER_CONFIG_MESSAGE");const ha=Ea;const Sa={CLOUDFLARE:"cloudflare",AKAMAI:"akamai",FASTLY:"fastly",MAXCDN:"maxcdn",CLOUDFRONT:"cloudfront",CHINACACHE:"chinacache",BITGRAVITY:"bitgravity"};var da,fa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.register(t,e)},pa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.registerVideoJSPlayer(t,e)},ya=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.registerDashJSPlayer(t,e)},Aa=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.registerHLSJSPlayer(t,e)},va=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.registerShakaPlayer(t,e)},_a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.registerHTML5Player(t,e)},ba=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da.registerReactNativeVideoPlayer(t,e)},Na=function(){return da.getCurrentImpressionId()},Ta=function(){return da.analyticsStateMachine},ga=function(t){return da.updateCustomData(t)},Da=function(t){return da.updateCustomVideoData(t)},Ia=function(t){return da.updateCustomUserData(t)},Pa=function(t){return da.updateCustomPlayerData(t)},Ca=function(t,e){return da.customEventHandler(t,e)},Ua=function(t,e){return new Promise((function(a,i){da.customEventHandlerAsync(t,e).then((function(t){a(t)})).catch((function(t){i(t)}))}))},Ga=function(t){return da=new ha(t),{register:fa,registerVideoJSPlayer:pa,registerDashJSPlayer:ya,registerHLSJSPlayer:Aa,registerShakaPlayer:va,registerHTML5Player:_a,registerReactNativeVideoPlayer:ba,getCurrentImpressionId:Na,stateMachine:Ta,updateCustomData:ga,updateCustomVideoData:Da,updateCustomUserData:Ia,updateCustomPlayerData:Pa,setCustomData:da.setCustomData,setCustomDataOnce:da.setCustomDataOnce,customEventHandler:Ca,customEventHandlerAsync:Ua}};Ga.Players=Kt,Ga.CdnProviders=Sa,Ga.gumletInsightsEvents=ht,Ga.gumletSupportedPlayers=Kt,"undefined"!=typeof window&&(window.gumlet=window.gumlet||{},window.gumlet.insights=Ga,window.gumletInsightsEvents=ht,window.gumletSupportedPlayers=Kt);const Ra={insights:Ga,gumletInsightsEvents,gumletSupportedPlayers}})(),i})()));